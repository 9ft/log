<!doctype html><html lang=zh-cn><head><title>使用Docker搭建RocketMq ::
未命名</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="一直在使用公司提供的RocketMq环境，公司提供的是深度定制的版本。突发奇想自己也搭建一个试试。RocketMQ作为一个分布式架构的系统，docker-compose方式可以清晰的用多容器模拟分布式的状态。因为是单机器并且性能不强的情况下搭建，遇到一些坑，这里记录一下，搭建完成"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/rockermq-docker/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="使用Docker搭建RocketMq"><meta name=twitter:description content="一直在使用公司提供的RocketMq环境，公司提供的是深度定制的版本。突发奇想自己也搭建一个试试。RocketMQ作为一个分布式架构的系统，docker-compose方式可以清晰的用多容器模拟分布式的状态。因为是单机器并且性能不强的情况下搭建，遇到一些坑，这里记录一下，搭建完成"><meta property="og:title" content="使用Docker搭建RocketMq"><meta property="og:description" content="一直在使用公司提供的RocketMq环境，公司提供的是深度定制的版本。突发奇想自己也搭建一个试试。RocketMQ作为一个分布式架构的系统，docker-compose方式可以清晰的用多容器模拟分布式的状态。因为是单机器并且性能不强的情况下搭建，遇到一些坑，这里记录一下，搭建完成"><meta property="og:type" content="article"><meta property="og:url" content="/posts/rockermq-docker/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-03-05T08:00:00+08:00"><meta property="article:modified_time" content="2020-03-05T08:00:00+08:00"><meta property="og:site_name" content="未命名"></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>未命名</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/archive/>Archive</a></li><li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/archive/>Archive</a></li><li><a href=/about>About</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>使用Docker搭建RocketMq</h1><div class=post-meta><span class=post-date>2020-03-05</span></div><div class=post-content><h2>Table of Contents</h2><aside class=table-of-contents><nav id=TableOfContents><ul><li><a href=#1-生成docker-composeyml>1. 生成docker-compose.yml</a></li><li><a href=#2-增加可视化界面可选>2. 增加可视化界面(可选)</a></li><li><a href=#3-运行>3. 运行</a></li><li><a href=#4-配置broker>4. 配置broker</a><ul><li><a href=#配置ip>配置IP</a></li><li><a href=#配置监听端口>配置监听端口</a></li></ul></li><li><a href=#完整配置>完整配置</a></li></ul><ul><li><a href=#rocketmq-client-go>rocketmq-client-go</a><ul><li><a href=#producer>producer</a></li><li><a href=#consumer>consumer</a></li></ul></li></ul></nav></aside><p>一直在使用公司提供的RocketMq环境，公司提供的是深度定制的版本。突发奇想自己也搭建一个试试。RocketMQ作为一个分布式架构的系统，docker-compose方式可以清晰的用多容器模拟分布式的状态。因为是单机器并且性能不强的情况下搭建，遇到一些坑，这里记录一下，搭建完成后使用go版本sdk进行生产消费操作</p><h1 id=安装>安装</h1><h2 id=1-生成docker-composeyml>1. 生成docker-compose.yml</h2><p>使用官方提供的工具(<a href=https://github.com/apache/rocketmq-docker.git>RocketMQ-Docker</a>)生成docker-compose.yml</p><p><code>git clone https://github.com/apache/rocketmq-docker.git</code></p><p>设置RocketMq版本，其中确保设置的<code>RMQ-VERSION</code>在<a href=https://hub.docker.com/r/apacherocketmq/rocketmq/tags>官方仓库tag</a>中存在，如4.6.0</p><p><code>sh stage.sh RMQ-VERSION</code></p><p>执行后生成的docker-compose.yml连同配置文件放在<code>stages/4.6.0/docker-compose</code>中，可以将此文件夹拷贝出来或者直接在此文件夹运行。</p><p><img src=rmq-deploy.png alt></p><p>生成的docker-compose包括3个服务，对应上图可以理解RocketMQ的部署结构:</p><ul><li>1个无状态的<code>namesrv</code>, Name Server是一个几乎无状态节点，可集群部署，节点之间无任何信息同步。</li><li>2个外部挂载配置文件的<code>broker</code>, 此配置中两个都为Master无Slave</li></ul><h2 id=2-增加可视化界面可选>2. 增加可视化界面(可选)</h2><p>可以将官方提供的<a href=https://github.com/apache/rocketmq-externals/tree/master/rocketmq-console>rocketmq-console</a>放入docker-compose.yml中</p><pre><code>rocketmq-console-ng:
  image: styletang/rocketmq-console-ng
  container_name: rocketmq-console-ng
  ports:
    - 8087:8080
  depends_on:
    - namesrv
  environment:
    - JAVA_OPTS= -Dlogging.level.root=info   -Drocketmq.namesrv.addr=namesrv:9876 
    - Dcom.rocketmq.sendMessageWithVIPChannel=false
</code></pre><h2 id=3-运行>3. 运行</h2><p><code>docker-compose up -d</code> 启动</p><p>官方有提供启动脚本 <code>play-docker-compose.sh</code>，我看了一下只是生成一些目录，没有必要使用，运行时会自动生成这些空挂载目录的</p><p>❗️可能遇到的情况</p><ol><li><p>broker意外退出(<a href=https://github.com/apache/rocketmq-externals/issues/78>issue 78</a>)</p><p>原因: 可能是由于jvm内存配置原因(默认配置一个broker需要4+4=8G内存)</p><p>解决: 减少内存使用, 对broker增加环境变量<code>JAVA_OPT_EXT</code> 值为 <code>-server -Xms128m -Xmx128m</code></p></li></ol><p>启动后打开<code>ip:8087</code>进入图形界面</p><p><img src=console-cluster-ip-invalid.png alt></p><h2 id=4-配置broker>4. 配置broker</h2><h3 id=配置ip>配置IP</h3><p>此时cluster内可以查看启动的两个broker信息，生产消费时，客户端会连接namesvr查找broker地址，再直连broker，然而目前的broker地址是docker内部地址，需要将此地址手动设置为外部可连接的地址。</p><p>配置文件 <code>broker.conf</code> 中增加手动配置IP</p><p><code>brokerIP1=10.0.0.211</code></p><h3 id=配置监听端口>配置监听端口</h3><p>目前是单台机器部署两个broker，都使用同一个IP并且都使用默认端口的话，会造成端口冲突，比如上图所示目前默认状态两个broker都监听了10911端口，还需要将broker监听端口进行配置，与此同时更新docker-compose.yml里暴露的端口。</p><p><code>listenPort=11911</code></p><p><img src=console-cluster-ip-valid.png alt></p><p>重新运行后，两个broker使用同一个ip监听不同端口，看起来没问题</p><blockquote><p>broker配置文档: <a href=https://rocketmq.apache.org/docs/rmq-deployment/#broker-configuration>Broker configuration</a></p></blockquote><h2 id=完整配置>完整配置</h2><p>broker-a 的配置文件 <code>data/conf/broker.conf</code>:</p><pre><code>brokerClusterName = DefaultCluster
brokerName = broker-a
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH

brokerIP1=10.0.0.211
</code></pre><p>broker-b 的配置文件 <code>data1/conf/broker.conf</code>:</p><pre><code>brokerClusterName = DefaultCluster
brokerName = broker-b
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH

brokerIP1=10.0.0.211
listenPort=11911
</code></pre><p><code>docker-compose.yml</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;2&#39;</span>
<span style=color:#f92672>services</span>:
  <span style=color:#75715e>#Service for nameserver</span>
  <span style=color:#f92672>namesrv</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>apacherocketmq/rocketmq:4.6.0</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>rmqnamesrv</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>9876</span>:<span style=color:#ae81ff>9876</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./data/namesrv/logs:/home/rocketmq/logs</span>
    <span style=color:#f92672>command</span>: <span style=color:#ae81ff>sh mqnamesrv</span>

  <span style=color:#75715e>#Service for broker</span>
  <span style=color:#f92672>broker</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>apacherocketmq/rocketmq:4.6.0</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>rmqbroker</span>
    <span style=color:#f92672>links</span>:
      - <span style=color:#ae81ff>namesrv</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>10909</span>:<span style=color:#ae81ff>10909</span>
      - <span style=color:#ae81ff>10911</span>:<span style=color:#ae81ff>10911</span>
      - <span style=color:#ae81ff>10912</span>:<span style=color:#ae81ff>10912</span>
    <span style=color:#f92672>environment</span>:
      - <span style=color:#ae81ff>NAMESRV_ADDR=namesrv:9876</span>
      - <span style=color:#ae81ff>JAVA_OPT_EXT=-server -Xms128m -Xmx128m</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./data/broker/logs:/home/rocketmq/logs</span>
      - <span style=color:#ae81ff>./data/broker/store:/home/rocketmq/store</span>
      - <span style=color:#ae81ff>./data/broker/conf/broker.conf:/opt/rocketmq-4.6.0/conf/broker.conf</span>
    <span style=color:#f92672>command</span>: <span style=color:#ae81ff>sh mqbroker -c /opt/rocketmq-4.6.0/conf/broker.conf</span>

  <span style=color:#75715e>#Service for another broker -- broker1</span>
  <span style=color:#f92672>broker1</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>apacherocketmq/rocketmq:4.6.0</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>rmqbroker-b</span>
    <span style=color:#f92672>links</span>:
      - <span style=color:#ae81ff>namesrv</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>11909</span>:<span style=color:#ae81ff>11909</span>
      - <span style=color:#ae81ff>11911</span>:<span style=color:#ae81ff>11911</span>
      - <span style=color:#ae81ff>11912</span>:<span style=color:#ae81ff>11912</span>
    <span style=color:#f92672>environment</span>:
      - <span style=color:#ae81ff>NAMESRV_ADDR=namesrv:9876</span>
      - <span style=color:#ae81ff>JAVA_OPT_EXT=-server -Xms128m -Xmx128m</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./data1/broker/logs:/home/rocketmq/logs</span>
      - <span style=color:#ae81ff>./data1/broker/store:/home/rocketmq/store</span>
      - <span style=color:#ae81ff>./data1/broker/conf/broker.conf:/opt/rocketmq-4.6.0/conf/broker.conf</span>
    <span style=color:#f92672>command</span>: <span style=color:#ae81ff>sh mqbroker -c /opt/rocketmq-4.6.0/conf/broker.conf</span>

  <span style=color:#f92672>rocketmq-console-ng</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>styletang/rocketmq-console-ng</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>rocketmq-console-ng</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>8087</span>:<span style=color:#ae81ff>8080</span>
    <span style=color:#f92672>depends_on</span>:
      - <span style=color:#ae81ff>namesrv</span>
    <span style=color:#f92672>environment</span>:
      - <span style=color:#ae81ff>JAVA_OPTS= -Dlogging.level.root=info   -Drocketmq.namesrv.addr=namesrv:9876 </span>
      - <span style=color:#ae81ff>Dcom.rocketmq.sendMessageWithVIPChannel=false</span>
</code></pre></div><h1 id=使用>使用</h1><h2 id=rocketmq-client-go>rocketmq-client-go</h2><p>官方已经出go原生的客户端<a href=https://github.com/apache/rocketmq-client-go/tree/native>rocketmq-client-go</a></p><p>获取库: <code>go get github.com/apache/rocketmq-client-go/v2</code></p><p>使用库自带的examples进行测试</p><h3 id=producer>producer</h3><p>向<code>topic: test</code>中发送消息</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
  <span style=color:#a6e22e>p</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>rocketmq</span>.<span style=color:#a6e22e>NewProducer</span>(
    <span style=color:#a6e22e>producer</span>.<span style=color:#a6e22e>WithNameServer</span>([]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;10.0.0.211:9876&#34;</span>}),
    <span style=color:#a6e22e>producer</span>.<span style=color:#a6e22e>WithRetry</span>(<span style=color:#ae81ff>2</span>),
  )
  <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>Start</span>()
  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;start producer error: %s&#34;</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
    <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Exit</span>(<span style=color:#ae81ff>1</span>)
  }
  <span style=color:#a6e22e>topic</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;test&#34;</span>

  <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
    <span style=color:#a6e22e>msg</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>primitive</span>.<span style=color:#a6e22e>Message</span>{
      <span style=color:#a6e22e>Topic</span>: <span style=color:#a6e22e>topic</span>,
      <span style=color:#a6e22e>Body</span>:  []byte(<span style=color:#e6db74>&#34;Hello RocketMQ Go Client! &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Itoa</span>(<span style=color:#a6e22e>i</span>)),
    }
    <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>SendSync</span>(<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Background</span>(), <span style=color:#a6e22e>msg</span>)

    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
      <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;send message error: %s\n&#34;</span>, <span style=color:#a6e22e>err</span>)
    } <span style=color:#66d9ef>else</span> {
      <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;send message success: result=%s\n&#34;</span>, <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>String</span>())
    }
  }
  <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>Shutdown</span>()
  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;shutdown producer error: %s&#34;</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
  }
}
</code></pre></div><h3 id=consumer>consumer</h3><p>消费组<code>testGroup</code>订阅<code>topic: test</code>的消息进行消费</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
  <span style=color:#a6e22e>c</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>rocketmq</span>.<span style=color:#a6e22e>NewPushConsumer</span>(
    <span style=color:#a6e22e>consumer</span>.<span style=color:#a6e22e>WithGroupName</span>(<span style=color:#e6db74>&#34;testGroup&#34;</span>),
    <span style=color:#a6e22e>consumer</span>.<span style=color:#a6e22e>WithNameServer</span>([]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;10.0.0.211:9876&#34;</span>}),
  )
  <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Subscribe</span>(<span style=color:#e6db74>&#34;test&#34;</span>, <span style=color:#a6e22e>consumer</span>.<span style=color:#a6e22e>MessageSelector</span>{}, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>,
    <span style=color:#a6e22e>msgs</span> <span style=color:#f92672>...*</span><span style=color:#a6e22e>primitive</span>.<span style=color:#a6e22e>MessageExt</span>) (<span style=color:#a6e22e>consumer</span>.<span style=color:#a6e22e>ConsumeResult</span>, <span style=color:#66d9ef>error</span>) {
    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>msgs</span> {
      <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;subscribe callback: %v \n&#34;</span>, <span style=color:#a6e22e>msgs</span>[<span style=color:#a6e22e>i</span>])
    }

    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>consumer</span>.<span style=color:#a6e22e>ConsumeSuccess</span>, <span style=color:#66d9ef>nil</span>
  })
  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
  }
  <span style=color:#75715e>// Note: start after subscribe
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Start</span>()
  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
    <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Exit</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
  }
  <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Hour</span>)
  <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Shutdown</span>()
  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;shutdown Consumer error: %s&#34;</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
  }
}
</code></pre></div><p>Dashboard中查看监控，两个broker都在正常工作，符合预期，搭建完成</p><p><img src=two-cluster.png alt></p><h1 id=ref>Ref</h1><p><a href=http://jm.taobao.org/2017/01/12/rocketmq-quick-start-in-10-minutes/>[1] 十分钟入门RocketMQ</a></p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>更多</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/markdown-img-path-hugo/><span class=button__icon>←</span>
<span class=button__text>Hugo博文图片路径</span></a></span>
<span class="button next"><a href=/posts/profiling/><span class=button__text>系统和应用性能分析工具</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//mindytech.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>未命名</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2021 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-46567212-1','auto'),ga('send','pageview'))</script></body></html>
<!doctype html><html lang=zh-cn><head><title>神州 K640E-i7 黑苹果安装 ::
未命名</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="changelog: 2020-03-09 fix screen glitch 2019-12-09 替换为 WhateverGreen 驱动核显 2019-10-20 update to catalina 前期工作 必知必会. Windows 下挂载 Mac 的 EFI 分区 管理员权限下执行: C:\Windows\system32&amp;gt;diskpart // 进入 diskpart DISKPART&amp;gt; list disk // 列出磁盘 Disk ### Status Size Free Dyn Gpt -------- ------------- ------- ------- --- --- Disk 0 Online 931 GB 0 B Disk 1 Online 119 GB 0 B * Disk 2 Online 111 GB 0 B * DISKPART&amp;gt; select disk 1 // 选择磁盘 Disk 1 is now the selected disk. DISKPART&amp;gt; list partition // 列出所选磁盘分区 Partition ### Type Size Offset ------------- ---------------- ------- ------- Partition 1 System 200 MB 20 KB Partition 2"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/macosx86/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="神州 K640E-i7 黑苹果安装"><meta name=twitter:description content="changelog: 2020-03-09 fix screen glitch 2019-12-09 替换为 WhateverGreen 驱动核显 2019-10-20 update to catalina 前期工作 必知必会. Windows 下挂载 Mac 的 EFI 分区 管理员权限下执行: C:\Windows\system32>diskpart // 进入 diskpart DISKPART> list disk // 列出磁盘 Disk ### Status Size Free Dyn Gpt -------- ------------- ------- ------- --- --- Disk 0 Online 931 GB 0 B Disk 1 Online 119 GB 0 B * Disk 2 Online 111 GB 0 B * DISKPART> select disk 1 // 选择磁盘 Disk 1 is now the selected disk. DISKPART> list partition // 列出所选磁盘分区 Partition ### Type Size Offset ------------- ---------------- ------- ------- Partition 1 System 200 MB 20 KB Partition 2"><meta property="og:title" content="神州 K640E-i7 黑苹果安装"><meta property="og:description" content="changelog: 2020-03-09 fix screen glitch 2019-12-09 替换为 WhateverGreen 驱动核显 2019-10-20 update to catalina 前期工作 必知必会. Windows 下挂载 Mac 的 EFI 分区 管理员权限下执行: C:\Windows\system32>diskpart // 进入 diskpart DISKPART> list disk // 列出磁盘 Disk ### Status Size Free Dyn Gpt -------- ------------- ------- ------- --- --- Disk 0 Online 931 GB 0 B Disk 1 Online 119 GB 0 B * Disk 2 Online 111 GB 0 B * DISKPART> select disk 1 // 选择磁盘 Disk 1 is now the selected disk. DISKPART> list partition // 列出所选磁盘分区 Partition ### Type Size Offset ------------- ---------------- ------- ------- Partition 1 System 200 MB 20 KB Partition 2"><meta property="og:type" content="article"><meta property="og:url" content="/posts/macosx86/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-09-27T23:33:57+08:00"><meta property="article:modified_time" content="2020-03-09T15:16:00+08:00"><meta property="og:site_name" content="未命名"></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>未命名</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/archive/>Archive</a></li><li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/archive/>Archive</a></li><li><a href=/about>About</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>神州 K640E-i7 黑苹果安装</h1><div class=post-meta><span class=post-date>2016-09-27</span>
<span class=post-moddate>(更新
2020-03-09)</span></div><div class=post-content><h2>Table of Contents</h2><aside class=table-of-contents><nav id=TableOfContents><ul><li><a href=#windows-下挂载-mac-的-efi-分区>Windows 下挂载 Mac 的 EFI 分区</a></li><li><a href=#mac-下挂载-efi-分区>Mac 下挂载 EFI 分区</a><ul><li><a href=#方法1命令行方式>方法1，命令行方式</a></li><li><a href=#方法2gui方式>方法2，GUI方式</a></li></ul></li></ul><ul><li><a href=#安装-fakesmc-和-clover>安装 FakeSMC 和 Clover</a></li><li><a href=#键盘和触摸板>键盘和触摸板</a></li><li><a href=#显卡>显卡</a><ul><li><a href=#修复开机花屏boot-second-stage-glitch>修复开机花屏(boot second stage glitch)</a></li><li><a href=#修复开机后应用花屏app-glitch>修复开机后应用花屏(app glitch)</a></li><li><a href=#todo>TODO:</a></li></ul></li><li><a href=#声卡>声卡</a><ul><li><a href=#todo-1>TODO:</a></li></ul></li><li><a href=#电池>电池</a></li><li><a href=#bcm94360hmb>BCM94360HMB</a><ul><li><a href=#屏蔽针脚>屏蔽针脚</a></li><li><a href=#蓝牙驱动>蓝牙驱动</a></li><li><a href=#显示蓝牙为第三方驱动的解决办法>显示蓝牙为第三方驱动的解决办法</a></li></ul></li></ul><ul><li><a href=#clover-启动菜单>Clover 启动菜单</a></li></ul><ul><li><a href=#数据盘格式>数据盘格式</a></li></ul></nav></aside><p>changelog:</p><ul><li>2020-03-09 fix screen glitch</li><li>2019-12-09 替换为 WhateverGreen 驱动核显</li><li>2019-10-20 update to catalina</li></ul><h1 id=前期工作>前期工作</h1><p>必知必会.</p><h2 id=windows-下挂载-mac-的-efi-分区>Windows 下挂载 Mac 的 EFI 分区</h2><p><strong>管理员权限下执行</strong>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>C:<span style=color:#ae81ff>\W</span>indows<span style=color:#ae81ff>\s</span>ystem32&gt;diskpart            // 进入 diskpart
DISKPART&gt; list disk                     // 列出磁盘

  Disk <span style=color:#75715e>###  Status         Size     Free     Dyn  Gpt</span>
  --------  -------------  -------  -------  ---  ---
  Disk <span style=color:#ae81ff>0</span>    Online          <span style=color:#ae81ff>931</span> GB      <span style=color:#ae81ff>0</span> B
  Disk <span style=color:#ae81ff>1</span>    Online          <span style=color:#ae81ff>119</span> GB      <span style=color:#ae81ff>0</span> B        *
  Disk <span style=color:#ae81ff>2</span>    Online          <span style=color:#ae81ff>111</span> GB      <span style=color:#ae81ff>0</span> B        *

DISKPART&gt; <span style=color:#66d9ef>select</span> disk <span style=color:#ae81ff>1</span>                 // 选择磁盘

Disk <span style=color:#ae81ff>1</span> is now the selected disk.

DISKPART&gt; list partition                // 列出所选磁盘分区

  Partition <span style=color:#75715e>###  Type              Size     Offset</span>
  -------------  ----------------  -------  -------
  Partition <span style=color:#ae81ff>1</span>    System             <span style=color:#ae81ff>200</span> MB    <span style=color:#ae81ff>20</span> KB
  Partition <span style=color:#ae81ff>2</span>    Primary            <span style=color:#ae81ff>118</span> GB   <span style=color:#ae81ff>200</span> MB
  Partition <span style=color:#ae81ff>3</span>    Unknown            <span style=color:#ae81ff>619</span> MB   <span style=color:#ae81ff>118</span> GB

DISKPART&gt; <span style=color:#66d9ef>select</span> partition <span style=color:#ae81ff>1</span>            // 选择分区

Partition <span style=color:#ae81ff>1</span> is now the selected partition.

DISKPART&gt; assign                        // 分配盘符, 盘符为系统预设

DiskPart successfully assigned the drive letter or mount point.
</code></pre></div><p>盘符挂载好，通过自带的资源管理器</p><h2 id=mac-下挂载-efi-分区>Mac 下挂载 EFI 分区</h2><h3 id=方法1命令行方式>方法1，命令行方式</h3><p><strong>1. Discover the volume identifier for your EFI boot partition.</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>diskutil list
</code></pre></div><p>The output should look something like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>/dev/disk0 <span style=color:#f92672>(</span>internal, physical<span style=color:#f92672>)</span>:
   <span style=color:#75715e>#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:     FDisk_partition_scheme                        *1.0 TB     disk0
   1:               Windows_NTFS Data                    1.0 TB     disk0s1
/dev/disk1 <span style=color:#f92672>(</span>internal, physical<span style=color:#f92672>)</span>:
   <span style=color:#75715e>#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:      GUID_partition_scheme                        *128.0 GB   disk1
   1:                        EFI EFI                     209.7 MB   disk1s1
   2:                  Apple_HFS macOS                   127.2 GB   disk1s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk1s3
/dev/disk2 <span style=color:#f92672>(</span>internal, physical<span style=color:#f92672>)</span>:
   <span style=color:#75715e>#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:      GUID_partition_scheme                        *120.0 GB   disk2
   1:           Windows Recovery                         471.9 MB   disk2s1
   2:                        EFI NO NAME                 104.9 MB   disk2s2
   3:         Microsoft Reserved                         16.8 MB    disk2s3
   4:       Microsoft Basic Data Windows                 119.4 GB   disk2s4
</code></pre></div><p>In this case, the volume identifier of the EFI partition is <code>disk1s1</code>.</p><p><strong>2. Create a mount point.</strong></p><p>A mount point is a directory where a non-booted volume is mounted.  On Mac OS X, mount points are typically created in /Volumes.  We can create a directory called efi within /Volumes by running the following command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>mkdir /Volumes/efi
</code></pre></div><p><strong>3. Mount the EFI partition at the efi mount point.</strong></p><p>Run the command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo mount -t msdos /dev/disk1s1 /Volumes/efi
</code></pre></div><p>That’s it.  Your EFI volume will be mounted.  Modify it at your own risk.</p><h3 id=方法2gui方式>方法2，GUI方式</h3><p>Clover Configurator -> 工具 -> 挂载分区</p><h1 id=制作系统盘>制作系统盘</h1><p>下载 Mojave 及后续版本时不像以前一样直接在 Mac App Store 下载，这时候需要使用 <a href=http://dosdude1.com/catalina/><code>macOS Catalina Patcher</code></a> 来获得完整镜像，下载完成后使用 <a href=https://www.tonymacx86.com/resources/unibeast-9-1-0-mojave.418/><code>UniBeast</code></a> 创建 USB 启动盘，注意启动盘格式应为 GUID。</p><p>具体格式可以通过 <code>diskutil list</code> 确认，格式化为 GUID 分区 <code>diskutil eraseDisk HFS+ usb GPT /dev/disk3</code></p><p><img src=2019-04-05.21.36.20.png alt></p><h1 id=安装系统>安装系统</h1><p>使用刚刚的可启动 U 盘 正常安装。</p><h1 id=安装驱动>安装驱动</h1><p>第一次开机时的状态:</p><ul><li>无线网卡已经驱动好了 (目前版本 BCM94360HMB 2.4G、5G 免驱).</li><li>笔记本键盘和触摸板不能用, 因为没合适的 PS2 键盘驱动, 找一个 USB 外接键盘以继续.</li></ul><h2 id=安装-fakesmc-和-clover>安装 FakeSMC 和 Clover</h2><p>第一次开机运行 MultiBeast, 它可以安装 Clover 引导和一些驱动.</p><p><img src=2016-09-02.1.30.31.png alt=MultiBeast title=MultiBeast></p><p>安装 MultiBeast 提供的:</p><ul><li><p>FakeSMC</p></li><li><p>Clover UEFI</p></li></ul><p>安装重启, 现在可以把系统的默认启动项改为 Clover, 可以引导 Windows 和 macOS, 推荐两个系统共用一个 EFI 分区, 系统 U 盘可以暂时扔掉.</p><blockquote><p>目前更流行使用 VirtualSMC 来代替FakeSMC，但我自己试过多次 VirtualSMC 和 Lilu 不能共存。。原因不明</p></blockquote><h2 id=键盘和触摸板>键盘和触摸板</h2><p>键盘还不能使用, 为了方便折腾, 先驱动键盘和触摸板.</p><p>这里使用的是 <a href=http://forum.osxlatitude.com/>OSXLatitude Forum</a> 大神 Crew 的 <a href=http://forum.osxlatitude.com/index.php?/topic/1948-elan-focaltech-and-synaptics-smart-touchpad-driver-mac-os-x/>ELAN, FocalTech and Synaptics (Smart Touchpad) Driver (Mac OS X)</a>.</p><p><em>Alt 键会被当成 Command 键, 外接键盘上则没这个问题.</em></p><p>下载 <code>SmartTouchPad_v4.6.5.zip</code>, 打开 <code>Contents／PlugIns／ApplePS2Keyboard.kext/Contents/Info.plist</code>, 将 <code>Swap alt and windows key</code> 置 为 <code>false</code></p><p>Swap command and option</p><h2 id=显卡>显卡</h2><p>Intel HD Graphics 4600</p><blockquote><p>参照 <a href=https://zuiyu1818.cn/posts/Hac_Intel_Graphics.html>WhateverGreen 驱动 Intel 核显</a></p></blockquote><h3 id=修复开机花屏boot-second-stage-glitch>修复开机花屏(boot second stage glitch)</h3><p>试了很多办法都不奏效，只能修改clover分辨率为<code>1024*768</code></p><h3 id=修复开机后应用花屏app-glitch>修复开机后应用花屏(app glitch)</h3><p>加入补丁</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;dict&gt;</span>
  <span style=color:#f92672>&lt;key&gt;</span>Comment<span style=color:#f92672>&lt;/key&gt;</span>
  <span style=color:#f92672>&lt;string&gt;</span>1536MB - 2048MB for HD4200_4400_4600 Mobile<span style=color:#f92672>&lt;/string&gt;</span>
  <span style=color:#f92672>&lt;key&gt;</span>Disabled<span style=color:#f92672>&lt;/key&gt;</span>
  <span style=color:#f92672>&lt;false/&gt;</span>
  <span style=color:#f92672>&lt;key&gt;</span>Find<span style=color:#f92672>&lt;/key&gt;</span>
  <span style=color:#f92672>&lt;data&gt;</span>AQMDAwAAAAIAADABAABgAAAAAGA=<span style=color:#f92672>&lt;/data&gt;</span>
  <span style=color:#f92672>&lt;key&gt;</span>InfoPlistPatch<span style=color:#f92672>&lt;/key&gt;</span>
  <span style=color:#f92672>&lt;false/&gt;</span>
  <span style=color:#f92672>&lt;key&gt;</span>Name<span style=color:#f92672>&lt;/key&gt;</span>
  <span style=color:#f92672>&lt;string&gt;</span>AppleIntelFramebufferAzul<span style=color:#f92672>&lt;/string&gt;</span>
  <span style=color:#f92672>&lt;key&gt;</span>Replace<span style=color:#f92672>&lt;/key&gt;</span>
  <span style=color:#f92672>&lt;data&gt;</span>AQMDAwAAAAIAADABAACQAAAAAIA=<span style=color:#f92672>&lt;/data&gt;</span>
<span style=color:#f92672>&lt;/dict&gt;</span>
</code></pre></div><h3 id=todo>TODO:</h3><ul><li><input disabled type=checkbox> 亮度调节，<a href=https://github.com/acidanthera/WhateverGreen/blob/master/Manual/FAQ.IntelHD.cn.md#%E8%B0%83%E8%8A%82%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%BA%AE%E5%BA%A6>WhateverGreen 官方教程不生效</a></li></ul><h2 id=声卡>声卡</h2><p>这台笔记本声卡型号是 VIA VT1802P</p><p>10.15.2 开始已经可以使用 AppleALC 仿冒了，仅需要加载kext即可。升级10.15.2的惊喜，之前费了好大劲搞这个。</p><p><em>目前存在问题，开机默认耳机插口，需要手动切换到扬声器，麦克风测试是能用的，但杂音太大了基本不可用</em></p><h3 id=todo-1>TODO:</h3><ul><li><input disabled type=checkbox> AppleALC 仿冒</li><li><input disabled type=checkbox> 开机自动调整音频到扬声器</li></ul><h2 id=电池>电池</h2><p>RehabMan 大神的 <a href=https://github.com/RehabMan/OS-X-ACPI-Battery-Driver>OS-X-ACPI-Battery-Driver</a></p><h2 id=bcm94360hmb>BCM94360HMB</h2><h3 id=屏蔽针脚>屏蔽针脚</h3><p><img src=2019-11-01-BCM94360HMB.jpg alt=BCM94360HMB屏蔽针脚 title=BCM94360HMB屏蔽针脚></p><h3 id=蓝牙驱动>蓝牙驱动</h3><p>使用 <code>BrcmBluetoothInjector.kext</code></p><h3 id=显示蓝牙为第三方驱动的解决办法>显示蓝牙为第三方驱动的解决办法</h3><p><code>FakePCIID_BCM94352Z_as_BCM94360CS2.kext</code></p><h1 id=clover>Clover</h1><h2 id=clover-启动菜单>Clover 启动菜单</h2><p>删除 Clover 中无用的启动项.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;key&gt;</span>Scan<span style=color:#f92672>&lt;/key&gt;</span>
<span style=color:#f92672>&lt;dict&gt;</span>
    <span style=color:#f92672>&lt;key&gt;</span>Entries<span style=color:#f92672>&lt;/key&gt;</span>
    <span style=color:#f92672>&lt;true/&gt;</span>
    <span style=color:#f92672>&lt;key&gt;</span>Legacy<span style=color:#f92672>&lt;/key&gt;</span>
    <span style=color:#f92672>&lt;false/&gt;</span>
    <span style=color:#f92672>&lt;key&gt;</span>Tool<span style=color:#f92672>&lt;/key&gt;</span>
    <span style=color:#f92672>&lt;true/&gt;</span>
<span style=color:#f92672>&lt;/dict&gt;</span>
</code></pre></div><h1 id=与-windows-共存>与 Windows 共存</h1><h2 id=数据盘格式>数据盘格式</h2><p>因macOS使用iCloud相册必须使用HFS或AFS，只能放弃NTFS，Windows下使用 <a href=https://www.paragon-software.com/us/home/hfs-windows/>HFS+ for Windows by Paragon Software</a> 访问数据。Win下使用目前没遇到什么问题。</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>更多</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/macos-ntfs/><span class=button__icon>←</span>
<span class=button__text>macOS 原生读写挂载 NTFS 文件系统</span></a></span>
<span class="button next"><a href=/posts/k640e/><span class=button__text>入手神州 K640E-i7</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//mindytech.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>未命名</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2021 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-46567212-1','auto'),ga('send','pageview'))</script></body></html>
<!doctype html><html lang=zh-cn><head><title>Ubuntu 下安装 LNMP ::
未命名</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="安装 LAMP 咦？我们要安装 LNMP, 为什么要安装 LAMP 呢, 因为 Ubuntu 安装 LAMP 超级方便. 要其中的 MP (MySQL, PHP). sudo apt-get install lamp-server^ php5-fpm 和 php5-mcrypt 必须安装. 没安装上的话要手动安装. 其中: php5-fpm 是 FastCGI Process Manager, 是 Nginx 配合 PHP 所必须使用的. php5-mcrypt 是 phpMyAdmin 需要使用到的. 安装配置 Nginx 安装 sudo apt-get install nginx 配置 部署 HTML server { listen 80; listen [::]:80; root /usr/share/nginx/example.com; index index.html index.htm; server_name example.com; location / { try_files $uri $uri/ =404; } } 部署 PHP server { listen 80; listen [::]:80; server_name"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=/posts/ubuntu-lnmp/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu 下安装 LNMP"><meta name=twitter:description content="安装 LAMP 咦？我们要安装 LNMP, 为什么要安装 LAMP 呢, 因为 Ubuntu 安装 LAMP 超级方便. 要其中的 MP (MySQL, PHP). sudo apt-get install lamp-server^ php5-fpm 和 php5-mcrypt 必须安装. 没安装上的话要手动安装. 其中: php5-fpm 是 FastCGI Process Manager, 是 Nginx 配合 PHP 所必须使用的. php5-mcrypt 是 phpMyAdmin 需要使用到的. 安装配置 Nginx 安装 sudo apt-get install nginx 配置 部署 HTML server { listen 80; listen [::]:80; root /usr/share/nginx/example.com; index index.html index.htm; server_name example.com; location / { try_files $uri $uri/ =404; } } 部署 PHP server { listen 80; listen [::]:80; server_name"><meta property="og:title" content="Ubuntu 下安装 LNMP"><meta property="og:description" content="安装 LAMP 咦？我们要安装 LNMP, 为什么要安装 LAMP 呢, 因为 Ubuntu 安装 LAMP 超级方便. 要其中的 MP (MySQL, PHP). sudo apt-get install lamp-server^ php5-fpm 和 php5-mcrypt 必须安装. 没安装上的话要手动安装. 其中: php5-fpm 是 FastCGI Process Manager, 是 Nginx 配合 PHP 所必须使用的. php5-mcrypt 是 phpMyAdmin 需要使用到的. 安装配置 Nginx 安装 sudo apt-get install nginx 配置 部署 HTML server { listen 80; listen [::]:80; root /usr/share/nginx/example.com; index index.html index.htm; server_name example.com; location / { try_files $uri $uri/ =404; } } 部署 PHP server { listen 80; listen [::]:80; server_name"><meta property="og:type" content="article"><meta property="og:url" content="/posts/ubuntu-lnmp/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-05-05T08:00:00+08:00"><meta property="article:modified_time" content="2021-06-05T14:43:59+08:00"><meta property="og:site_name" content="未命名"><style type=text/css>body{font-weight:400}.logo__cursor{width:2px;background:#00ff7f}</style></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>未命名</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/archive/>Archive</a></li><li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/archive/>Archive</a></li><li><a href=/about>About</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Ubuntu 下安装 LNMP</h1><div class=post-meta><span class=post-date>2016-05-05</span>
<span class=post-moddate>(更新
2021-06-05)</span></div><div class=post-content><h2>Table of Contents</h2><aside class=table-of-contents><nav id=TableOfContents><ul><li><a href=#安装-lamp>安装 <code>LAMP</code></a></li><li><a href=#安装配置-nginx>安装配置 <code>Nginx</code></a><ul><li><a href=#安装>安装</a></li><li><a href=#配置>配置</a></li></ul></li><li><a href=#安装配置-phpmyadmin>安装配置 <code>phpMyAdmin</code></a><ul><li><a href=#安装-1>安装</a></li><li><a href=#配置-1>配置</a></li><li><a href=#问题-缺少-mcrypt-扩展-请检查-php-配置>问题: 缺少 <code>mcrypt</code> 扩展, 请检查 <code>PHP</code> 配置</a></li></ul></li><li><a href=#enjoy>Enjoy!</a></li></ul></nav></aside><h2 id=安装-lamp>安装 <code>LAMP</code></h2><p>咦？我们要安装 <code>LNMP</code>, 为什么要安装 <code>LAMP</code> 呢, 因为 <code>Ubuntu</code> 安装 <code>LAMP</code> 超级方便. 要其中的 <code>MP (MySQL, PHP)</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt-get install lamp-server^
</code></pre></div><p><code>php5-fpm</code> 和 <code>php5-mcrypt</code> 必须安装. 没安装上的话要手动安装. 其中:</p><ul><li><code>php5-fpm</code> 是 <code>FastCGI Process Manager</code>, 是 <code>Nginx</code> 配合 <code>PHP</code> 所必须使用的.</li><li><code>php5-mcrypt</code> 是 <code>phpMyAdmin</code> 需要使用到的.</li></ul><h2 id=安装配置-nginx>安装配置 <code>Nginx</code></h2><h3 id=安装>安装</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt-get install nginx
</code></pre></div><h3 id=配置>配置</h3><h4 id=部署-html>部署 <code>HTML</code></h4><pre><code class=language-conf data-lang=conf>server {
  listen 80;
  listen [::]:80;
  root /usr/share/nginx/example.com;
  index index.html index.htm;
  server_name example.com;

  location / {
    try_files $uri $uri/ =404;
  }
}
</code></pre><h4 id=部署-php>部署 <code>PHP</code></h4><pre><code class=language-conf data-lang=conf>server {
  listen 80;
  listen [::]:80;
  server_name example.com;
  root /usr/share/nginx/example.com;
  index index.html index.htm index.php;

  location / {
    try_files $uri $uri/ =404;
  }

  location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
  }

  location ~ /\.ht {
    deny all;
  }
}
</code></pre><p><code>PHP</code> 可以通过写个探针测试配置是否正确</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> <span style=color:#a6e22e>phpinfo</span>(); <span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h2 id=安装配置-phpmyadmin>安装配置 <code>phpMyAdmin</code></h2><h3 id=安装-1>安装</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt-get install phpmyadmin
</code></pre></div><h3 id=配置-1>配置</h3><p>仿照上一节 <code>部署 PHP</code> 中为 <code>phpmyadmin</code> 设置访问入口.</p><pre><code class=language-conf data-lang=conf>server {
  listen 80;
  listen [::]:80;
  server_name phpmyadmin.example.com;
  root /usr/share/phpmyadmin;
  index index.php;

  location / {
    try_files $uri $uri/ =404;
  }

  location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
  }
  location ~ /\.ht {
    deny all;
  }
}
</code></pre><h3 id=问题-缺少-mcrypt-扩展-请检查-php-配置>问题: 缺少 <code>mcrypt</code> 扩展, 请检查 <code>PHP</code> 配置</h3><p>如果出现 <code>缺少 mcrypt 扩展. 请检查 PHP 配置.</code> 的提示.</p><p>执行</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt-get install php5-mcrypt
</code></pre></div><p>配置 <code>php.ini</code>, 加上 <code>extension=php_mcrypt.so</code>, 修改结果:</p><pre><code class=language-conf data-lang=conf>;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions ;
;;;;;;;;;;;;;;;;;;;;;;
;
; If you wish to have an extension loaded automatically, use the following

extension=php_mcrypt.so
</code></pre><h2 id=enjoy>Enjoy!</h2></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>更多</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/hexo/><span class=button__icon>←</span>
<span class=button__text>hexo</span></a></span>
<span class="button next"><a href=/posts/jekyll-nginx/><span class=button__text>VPS 上利用 Jekyll Nginx 搭建博客</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//mindytech.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>未命名</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2021 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-46567212-1','auto'),ga('send','pageview'))</script></body></html>
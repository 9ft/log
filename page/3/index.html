<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>log</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Minzhang Cong"><meta name=description content="just a blog"><meta name=keywords content="Tech,Code,Life"><meta name=generator content="Hugo 0.66.0 with theme even"><link rel=canonical href=http://mindy.tk/><link href=http://mindy.tk/index.xml rel=alternate type=application/rss+xml title=log><link href=http://mindy.tk/index.xml rel=feed type=application/rss+xml title=log><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><meta property="og:title" content="log"><meta property="og:description" content="just a blog"><meta property="og:type" content="website"><meta property="og:url" content="http://mindy.tk/"><meta property="og:updated_time" content="2020-03-05T08:00:00+08:00"><meta itemprop=name content="log"><meta itemprop=description content="just a blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="log"><meta name=twitter:description content="just a blog"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>log</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>log</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><section id=posts class=posts><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/k640e/>入手神州 K640E-i7</a></h1><div class=post-meta><span class=post-time>2016-09-10</span>
<span class=more-meta>358 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>用不下去以前的 ASUS K42JA, 虽然配置目前还够用, 但屏幕分辨率太差劲了. 着手买新笔记本.</p><p>以前的目标是买一台 MBPR, 但两次跳票加上近期有传言说 9 月 7 的发布会还是不会发布新本. 偶然间看到神舟 K640E, 首先它有一个 1920x1080 分辨率的屏幕, 其次 CPU 也不差, 内存 4G 但可以扩展. 价格也便宜. 果断买之. 第一台有个坏点, 换新后还有个坏点&mldr;将就着用了.</p><p>外包装:</p><p><img src=/img/post/2016-09-10-k640e/IMG_3964.jpg alt></p><h1 id=硬件更换>硬件更换</h1><h2 id=内存>内存</h2><p>空槽加装了 8G 内存, 以后有机会的话可以扩展到 16G.</p><p>花费: ¥280</p><p><img src=/img/post/2016-09-10-k640e/IMG_3988_memory.jpg alt=Memory title=Memory></p><h2 id=硬盘>硬盘</h2><ul><li>空余硬盘位加装一块固态硬盘</li><li>光驱位加装一块机械硬盘</li></ul><p>两块硬盘都是现成的, 只有硬盘托架是新买的.</p><p>花费: ¥13.6</p><p><img src=/img/post/2016-09-10-k640e/IMG_3992_HDD.jpg alt=HDD title=HDD></p><h2 id=网卡>网卡</h2><p>自带网卡为 Intel® Dual Band Wireless-AC 3160, 据说 Intel 网卡黑苹果无解.</p><p>更换为 BCM94360HMB, 半高带蓝牙的网卡不多. 所以网卡略贵, 使用时还发生了一些插曲.</p><p>花费: ¥180</p><p><img src=/img/post/2016-09-10-k640e/IMG_4015_WLAN.jpg alt=WLAN title=WLAN></p><p>摘下本子的后壳只需要拧两颗螺丝, 十分方便折腾!</p><p><img src=/img/post/2016-09-10-k640e/IMG_3985.jpg alt=BackBoard title=BackBoard></p><p>目前特别喜欢这台电脑, 感觉超值!</p></div><div class=read-more><a href=/post/k640e/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/nginx-https/>使用 Let’s Encrypt 为网站增加 HTTPS 访问方式</a></h1><div class=post-meta><span class=post-time>2016-08-30</span>
<span class=more-meta>391 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>使用的证书是免费的 Let’s Encrypt, 相同免费的还有 StartSSL, 分别看了他俩的主页, 最后选择了 <a href=https://letsencrypt.org/>Let’s Encrypt</a>.</p><p>为了方便部署, 使用了电子前哨基金会(EFF)为 Let&rsquo;s Encrypt 推出的客户端 <a href=https://certbot.eff.org>Certbot</a>.</p><h1 id=下载安装-lets-encrypt-和-certbot>下载安装 Let’s Encrypt 和 Certbot</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>wget https://dl.eff.org/certbot-auto
chmod a+x certbot-auto
./certbot-auto
</code></pre></td></tr></table></div></div><p>会自动安装 certbot 和其依赖项, 包括 letsencrypt. 最后有个配置向导, 我用这个向导没成功, 下面手动配置就好.</p><h1 id=证书配置和获取>证书配置和获取</h1><p><strong>使用到的命令</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>usage:
  certbot [SUBCOMMAND] [options] [-d domain] [-d domain] ...

Major SUBCOMMANDS:
  certonly  仅获取证书, 不安装.

optional arguments:
  --webroot  获取的证书放到 webroot 里.
  --agree-tos  同意协议.
  --email  邮箱
  -w  网站路径
  -d  域名
</code></pre></td></tr></table></div></div><p><strong>获取证书</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>./certbot-auto certonly --webroot --agree-tos --email example@gmail.com -w /usr/share/nginx/example.com -d example.com
</code></pre></td></tr></table></div></div><p>运行后生成的证书在 <code>/etc/letsencrypt/live/</code> 下.</p><blockquote><p>⚠️ 多域名单证书没成功, 以后有空再看着文档搞搞</p></blockquote><h1 id=配置-nginx>配置 Nginx</h1><p><strong>同时使用 http:// 和 https:// 访问</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>server</span> <span class=p>{</span>
  <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
  <span class=kn>listen</span> <span class=s>[::]:80</span><span class=p>;</span>
  <span class=kn>listen</span> <span class=mi>443</span> <span class=s>ssl</span><span class=p>;</span>
  <span class=kn>listen</span> <span class=s>[::]:443</span> <span class=s>ssl</span><span class=p>;</span>
  <span class=kn>server_name</span> <span class=s>example.com</span><span class=p>;</span>
  <span class=kn>root</span> <span class=s>/usr/share/nginx/example.com</span><span class=p>;</span>
  <span class=kn>index</span> <span class=s>index.html</span><span class=p>;</span>

  <span class=kn>ssl_certificate</span>      <span class=s>/etc/letsencrypt/live/example.com/fullchain.pem</span><span class=p>;</span>
  <span class=kn>ssl_certificate_key</span>  <span class=s>/etc/letsencrypt/live/example.com/privkey.pem</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p><strong>http 跳转到 https</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>server</span> <span class=p>{</span>
  <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
  <span class=kn>listen</span> <span class=s>[::]:80</span><span class=p>;</span>
  <span class=kn>server_name</span> <span class=s>example.com</span><span class=p>;</span>
  <span class=kn>return</span> <span class=mi>301</span> <span class=s>https://</span><span class=nv>$server_name$request_uri</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>server</span> <span class=p>{</span>
  <span class=kn>listen</span> <span class=mi>443</span> <span class=s>ssl</span><span class=p>;</span>
  <span class=kn>listen</span> <span class=s>[::]:443</span> <span class=s>ssl</span><span class=p>;</span>
  <span class=kn>server_name</span> <span class=s>example.com</span><span class=p>;</span>
  <span class=kn>root</span> <span class=s>/usr/share/nginx/example.com</span><span class=p>;</span>
  <span class=kn>index</span> <span class=s>index.html</span><span class=p>;</span>

  <span class=kn>ssl_certificate</span>      <span class=s>/etc/letsencrypt/live/example.com/fullchain.pem</span><span class=p>;</span>
  <span class=kn>ssl_certificate_key</span>  <span class=s>/etc/letsencrypt/live/example.com/privkey.pem</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>使用 <code>nginx -s reload</code> 测试并重载配置.</p><h1 id=完成>完成</h1><p>观看效果 <a href=http://canukiss.me>个人博客</a>.</p><p><img src=/img/post/2016-08-30-nginx-https/canukiss.me_via_https.png alt="canukiss.me via HTTPS" title="canukiss.me via HTTPS"></p></div><div class=read-more><a href=/post/nginx-https/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/tjunet/>我是如何在天津大学上网的</a></h1><div class=post-meta><span class=post-time>2016-08-26</span>
<span class=more-meta>2299 words</span>
<span class=more-meta>5 mins read</span></div></header><div class=post-content><div class=post-summary><h1 id=前言>前言</h1><p>刚刚来到天大的时候, 第一次接触有 IPv6 的网络, 以前就听说过教育网但没接触过. IPv6 是教育网提供的, 而且很多高校都接入了教育网. IPv6 最吸引人的是它的流量免费, 而且上网限制不多. IPv4 流量收费, 开始的计费方式因为一直没用忘记了, 在最近一次调价(降价)后的计费的策略是每月 5G 免费流量, 可以叠加流量包 ¥2/1GB, 感觉挺贵的, 而且计量的方式很不方便.</p><p><img src=/img/post/2016-08-26-tjunet/tjunet_price.png alt="TJUNET Price" title="TJUNET Price"></p><p>每个月光更新软件估计就有 5G 了吧. 有免费的 IPv6 为什么还要付费买流量. 这篇文章记录一下我来天大后的免费上网策略, 应该也适合其他教育网用户.</p><h1 id=需求>需求</h1><p>需求的程度依次递减</p><ol><li>免费上网</li><li>科学上网</li><li>全平台</li><li>不依赖校内服务器</li></ol><p>第一, 免费上网就是就是折腾这些的力量来源, 刚需. 第二, 不能科学上网的网络对我来说就是没网. 第三, 目前在用 iOS / Android / Win / macOS, 全平台是必须的. 第四, 下面的方法有的会依赖一台学校里的服务器, 对于没有条件的当然不是一个好策略.</p><h1 id=开工>开工</h1><h2 id=服务器>服务器</h2><p>基本方法都是将所有流量转换成 IPv6 流量, 所以必须依靠一台同时具有 IPv6 和 IPv4 访问权限的主机. 免费的服务可以使用 Google App Engine, 付费的就是各种 VPS 主机了. 阿里云没 IPv6 而且带宽低, 否掉. 国内主机都可以排除掉, 因为选择了外国主机, 就同时兼备免费上网和科学上网了.</p><h3 id=免费的-goagent>免费的 GoAgent</h3><p>以前使用过好几年 GoAgent 了, 免费稳定, 怀念至今, 但它不是死掉了么? 那是因为在 IPv4 环境下可用 IP 都被 BAN 掉了, IPv6 环境下只要稍作调整就可以继续使用, 使用 GoAgent 刚好也能解决 Win / macOS 多平台的问题.</p><p>GoAgent 中修改本地配置 <code>proxy.ini</code>. <code>gae</code> 中开启 IPv6: <code>ipv6 = 1</code>, 找到 Google 的 v6 地址在 <code>iplist</code> 中的 <code>google_ipv6</code> 填入. 就可以享受快速稳定的免流量网络了.</p><p><code>proxy.ini</code> 中:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>[gae]
ipv6 = 1
[iplist]
google_ipv6 = IPv6 地址
</code></pre></td></tr></table></div></div><p>对 iOS / Android 移动平台, iOS 好像没 GoAgent 软件, Android 下有软件, 但我的 Android 还不能获取 v6 地址, 暂时没试. 只能曲线救国, 在校内一台电脑上运行 GoAgent, 并通过 Privoxy 开启 HTTP 代理服务器来分发网络, Privoxy 怎样配置, 后面会讲到.</p><h3 id=shadowsocks>Shadowsocks</h3><p>Shadowsocks 的混淆能力比较强, 使用的很普及, 用 IPv6 网络上 Shadowsocks 服务器就中转掉所有流量也是个好办法. 搭建 Shadowsocks 服务器可以参见我写的 [SS搭建]({% post_url 2015-10-12-build-ss %}). 需要注意配置文件 <code>shadowsocks.json</code> 中 <code>server</code> 的值应该为 <code>::</code>, 这样才可以用服务器的 IPv6 地址连接 SS, 网上查的很多配置都没注意 IPv6 环境.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;server&#34;</span><span class=p>:</span> <span class=s2>&#34;::&#34;</span><span class=p>,</span>
    <span class=nt>&#34;local_address&#34;</span><span class=p>:</span> <span class=s2>&#34;127.0.0.1&#34;</span><span class=p>,</span>
    <span class=nt>&#34;local_port&#34;</span><span class=p>:</span><span class=mi>1080</span><span class=p>,</span>
    <span class=nt>&#34;port_password&#34;</span><span class=p>:{</span>
         <span class=nt>&#34;10001&#34;</span><span class=p>:</span> <span class=s2>&#34;pass1&#34;</span><span class=p>,</span>
         <span class=nt>&#34;20001&#34;</span><span class=p>:</span> <span class=s2>&#34;pass2&#34;</span>
    <span class=p>},</span>
    <span class=nt>&#34;timeout&#34;</span><span class=p>:</span><span class=mi>300</span><span class=p>,</span>
    <span class=nt>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;chacha20&#34;</span><span class=p>,</span>
    <span class=nt>&#34;fast_open&#34;</span><span class=p>:</span> <span class=kc>false</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=vpn>VPN</h3><p>使用 IPv6 地址连接 VPN 服务器也是一个好办法, 不过我目前搭建的 VPN 只能在 Win 下使用. iOS / macOS 提示出错, 而使用 v4 地址却能正确连接, 原因不明.</p><p>VPN 方法全局流量都走服务器, 所以优缺参半:</p><p>优点:</p><ul><li>Win 平台下可以使用 Win10 商店和应用(Metro). 如果使用 GoAgent 或 SS 还要搭配 Proxifier, Fiddler 软件.</li><li>Win 平台下可以不用配置代理直接使用 npm gem git 等命令.</li></ul><p>缺点:</p><ul><li>缺点也很致命, 没办法使用教育网上的一些 PT 站.</li><li>与其他设备不在一个局域网上.</li></ul><p>VPN 对我来说还挺常用的, 在下载机以外的设备上使用很省心.</p><h2 id=本地配置>本地配置</h2><h3 id=win-平台使用-proxifier-将代理设置为全局>Win 平台使用 Proxifier 将代理设置为全局</h3><p><strong>配置 Proxy Servers</strong></p><p><img src=/img/post/2016-08-26-tjunet/Win_Proxifier_Proxy_Servers.png alt="Proxy Servers" title="Proxy Servers"></p><p><strong>配置 Proxification Rules</strong></p><p>校内的和 IPv6 连接直连, 其余走代理.</p><p><img src=/img/post/2016-08-26-tjunet/Win_Proxification_Rules.png alt="Proxification Rules" title="Proxification Rules"></p><p>正常使用应用商店和 Win10 App 还要使用 Fiddler 软件, 效果并不好. 如果不使用 Win10 App, 这种方法在 Win 下很完美了.</p><h3 id=使用-privoxy-搭建代理服务器>使用 Privoxy 搭建代理服务器</h3><p>如果使用 GoAgent 和 Shadowsocks, 为了方便 iOS / Android 平台的使用, 需要在校内搭建一台代理服务器, 这里搭建的是一个 HTTP 代理服务器, 任何设备都原生支持这种代理方式.</p><p>Win 下的 SS 自带了局域网分发网络的功能, 这里使用的是 <code>privoxy</code>, 版本 3.0.23. <code>config.txt</code> 更改如下:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>listen-address 0.0.0.0:1234      # 改为自己想要的端口号, 因为服务器不是静态IP, IP 就设置成 0.0.0.0:1234 了, [::]:1234 应该也可以.
forward        / .               # 转发所有通信（/）到所有目标（.)
forward-socks5 / 127.0.0.1:1080  # 转发所有通信到 SS 代理服务器上.
</code></pre></td></tr></table></div></div><p>三行搞定, 端口 <code>1234</code> 需要在防火墙中设置为允许.</p><p>完成这些步骤, 就可以把 IP 和端口告诉自己的好朋友和妹子们, 通过这个 HTTP 代理就能免费上网了!</p><h3 id=ios--macos-平台使用-surge>iOS / macOS 平台使用 Surge</h3><h4 id=全局使用代理>全局使用代理</h4><p>iOS 10 支持 IPv6 后, iOS 不需要依赖校内服务器就可以上网了. 需要搭配使用一个 &ldquo;网络调试&rdquo; 神器 Surge. 作者又发布了 Surge for Mac, 配置通用, 所以 iOS / macOS 平台下使用 Surge 的方法也通用.</p><p>其他高校的 v6 站直连, <code>*6.edu.cn</code> 填到 <code>skip-proxy</code> 中代理处理. 其他规则也很好写.</p><p><strong>配置规则</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>[Rule]
IP-CIDR,202.113.0.0/16,DIRECT     # 校内 IP
DOMAIN-SUFFIX,twt.edu.cn,DIRECT   # 直接访问校内网站
DOMAIN-SUFFIX,tju.edu.cn,DIRECT   # 直接访问校内网站
FINAL,Proxy                       # 所有请求走代理服务器
</code></pre></td></tr></table></div></div><p>macOS 命令行使用代理可以用 ProxyChains, 也可以用傻瓜模式的 Proxifier. 配置和 Windows 平台下的 Proxifier 一样.</p><p><strong>配置 Proxy Servers</strong></p><p><img src=/img/post/2016-08-26-tjunet/macOS_Proxifier_Proxy_Servers.png alt="Proxy Servers" title="Proxy Servers"></p><p><strong>配置 Proxification Rules</strong></p><p>校内的和 IPv6 连接直连, 其余都走代理.</p><p><img src=/img/post/2016-08-26-tjunet/macOS_Proxification_Rules.png alt="Proxification Rules" title="Proxification Rules"></p><h3 id=ios--macos-平台使用-surge-进阶>iOS / macOS 平台使用 Surge 进阶</h3><p>既然使用了 Surge, 一定好好折腾一下, 不然浪费了这么强大的工具.</p><p>配置的目标是可以自动切换上网方式, 只要打开 Surge, 任何网络环境都可以上网:</p><ul><li>校园网下自动使用 IPv6 免流量上网, 科学上网.</li><li>移动数据网络下使用 IPv4, PAC 自动切换, 国内直连, 科学上网.</li><li>一般 / 特定网络下(比如咖啡馆 WiFi)使用 IPv4, PAC 自动切换, 国内直连, 科学上网.</li></ul><p>这里以两台 SS 服务器为例.</p><p><strong>配置服务器</strong></p><p>添加两台服务器的 v4 和 v6 的访问方式:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>[Proxy]
server1.ss.v4 = custom,v4_IP,10001,chacha20,pass1,http://surge.pm/ss.module
server1.ss.v6 = custom,v6_IP,10001,chacha20,pass1,http://surge.pm/ss.module
server2.ss.v4 = custom,v4_IP,10001,chacha20,pass1,http://surge.pm/ss.module
server2.ss.v6 = custom,v6_IP,10001,chacha20,pass1,http://surge.pm/ss.module
</code></pre></td></tr></table></div></div><p><strong>配置规则</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>[Rule]
DOMAIN-SUFFIX,t66y.com,Proxy         # 一直走代理的连接
DOMAIN-SUFFIX,ad.sina.com.cn,REJECT  # 拒绝的连接
GEOIP,CN,GEO CN                      # 国内连接
FINAL,Proxy                          # 其余所有连接
</code></pre></td></tr></table></div></div><p>正常访问的外国网站也会走代理, 就当加速了&mldr;</p><p><strong>配置代理服务器组</strong></p><p>ss.url-test.v4 为 v4 环境下挑选一个最快服务器, ss.url-test.v6 为 v6 环境下挑选一个最快服务器.</p><p>Proxy 代理方式设置为根据 ssid 切换, 默认为 v4 环境, 移动数据网络下 cellular 当然也走 v4, 校园网 tjuwlan 要走 v6 服务器, 还可以设置其他一些特定的 ssid.</p><p>GEO CN 代理方式也根据 ssid 切换, 默认 v4 环境直连, v6 环境下走 v6 代理服务器.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>[Proxy Group]
ss.url-test.v4 = url-test, server1.ss.v4, server2.ss.v4, url = http://www.google.com/generate_204
ss.url-test.v6 = url-test, server1.ss.v6, server2.ss.v4, url = http://www.google.com/generate_204
Proxy = ssid, default = ss.url-test.v4, cellular = ss.url-test.v4, &#34;tjuwlan&#34; = ss.url-test.v6, &#34;实验室宽带 AP&#34; = ss.url-test.v4
GEO CN = ssid, default = DIRECT, cellular = DIRECT, &#34;tjuwlan&#34; = ss.url-test.v6, &#34;实验室宽带 AP&#34; = DIRECT
</code></pre></td></tr></table></div></div><p>Surge 这点最好, iOS / macOS 平台配置完就可以应付各种网络环境.</p><p>iOS 支持 IPv6 后, 搭配 Surge 可以独立免费上网. 我的 Android 仍然只有本地链路地址, 暂时无解, 只能依靠一台校内服务器.</p><h1 id=目前的解决方案>目前的解决方案</h1><ul><li>实验室台式机: SS, 负责 PT 做种, 通过 Privoxy 分发网络.</li><li>macOS: Surge.</li><li>iOS: Surge.</li><li>Android: 通过 Privoxy 分发的网络.</li><li>Win 笔记本: VPN, 免折腾.</li></ul><p>哈哈, 至今从没买过学校的流量包!</p></div><div class=read-more><a href=/post/tjunet/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/music-player/>音乐播放器</a></h1><div class=post-meta><span class=post-time>2016-08-25</span>
<span class=more-meta>1347 words</span>
<span class=more-meta>3 mins read</span></div></header><div class=post-content><div class=post-summary><h1 id=使用过的播放器>使用过的播放器</h1><p>最开始接触音乐播放器是初中, 电脑是 XP 系统, Windows Media Player 9 应该是最先接触的播放器. 刚打开新电脑, 用它播放自带的两首音乐Symphony No. 9 (Scherzo) 和 Highway Blues 至今还记忆犹新, 尤其 Jazz 的低音.</p><p><img src=/img/post/2016-08-25-music-player/WinMp9.png alt="Windows Media Player 9" title="Windows Media Player 9"></p><p>接下来接触了 Winamp, 界面全黑的给人一种神秘感, 换句话说就是不怎么会用, 不喜欢它的默认皮肤, 不过可以装音效插件, 用起来还是蛮爽的. 同期比较火的还有千千静听, 千千静听自带歌词显示, 就冲着功能当时很无敌了, 而且兼容 Winamp 插件, 界面小清新, 网吧装千千静听都是标配.</p><p><img src=/img/post/2016-08-25-music-player/winamp-5.jpg alt=Winamp title=Winamp></p><p>随着积攒的音乐文件越来越多, Winamp 和千千静听单薄的身躯已经应付不了管理大量音乐的任务. 回头又投入了 WMP 的怀抱. WMP 管理音乐非常棒, 点艺术家就能进入艺术家界面, 点专辑就能进入专辑界面, 对于有大量音乐的用户来说这功能简直太棒. WMP 不但管理音乐库方便, 有很多好用的功能, CD 转 MP3, 向 MP3 播放器拷音乐自动转码, 光盘烧录. 中间有个插曲, 那时我有个 128MB 的 MP3 播放器好像放下了 100 首左右的歌曲, 在我班级引起了一阵轰动, 归功于 WMP 的自动转码功能, 把音乐转换成了 64Kbps, 音质降低, 文件减少了. 不久之后, WMP 更新了版本 10, 以前的功能都在, 界面更好看, 喜欢的不行.</p><p>使用 WMP 管理音乐, 但临时听一个音频文件都要用 WMP 的话感觉有点大材小用, 所以有一个可以随时打开的播放器试听各种下载完的音乐还是很有必要的, 如果音乐满意, 才转移到我的音乐库. 这个任务让 Foobar2000 做简直太适合了, Foobar2000 有轻量级的界面, 插件丰富, 系统默认音频播放器就封给它.</p><p>下载音乐的来源大多是百度MP3, 酷我, 酷狗这种, 下载完音频文件的标签都很不标准, 还有很多错误. 这时接触了 iTunes AAC Plus, 就是 iTunes 上购买的音乐, 因为是正规版权的文件, 标签一定都是准的, 而且里面还带着购买人信息, 好像所有播放器都默认支持 .m4a 文件. 自从接触了 iTunes AAC Plus, iTunes 就接替 WMP 成为我管理音乐库的软件了.</p><p>用 iTunes 管理音乐比 WMP 有一些额外优势, iTunes 支持选集专辑, 个别专辑还有很炫的 iTunes LP(多媒体封面), 还能管理 iTunes 上购买的 MV. 但有个痛点是他们都不支持无损格式, 比如 APE 和 FLAC.</p><h1 id=lastfm>Last.fm</h1><p>说起音乐管理不得不说 Last.fm, 这个网站也是我心中 Web2.0 的代表产物. Last.fm Scrobbler 可以记录自己听过的每一首音乐. 可以每过一段时间看一看近期自己听音乐的情况. 最重要的是可以记录, 我总是坚信记录的意义不在于当下, 记录下来的个人数据可以在未来尽情发挥. 但最近一年自己迷上了网易云音乐, 手机 / PC / MAC 客户端统统没办法记录, 网易没跟 Spotify 学好啊. 以前换播放器的成本很低, 因为自己的数据都在 Last.fm 上, 现在不一样了, 所有的数据由网易掌握而且没办法轻易导出. 没办法也只能叹息一下, 趋势就是这样, 就像记账,笔记,读书应用一样, 他们拥有了用户数据而且不轻易导出, 增加了用户更换软件的成本, 变相的留住了客户. 如果再没有合适的 Scrobbler 软件, 记录的歌曲可能就定格到这里了.</p><p><img src=/img/post/2016-08-25-music-player/2016-08-25-my-last.fm.png alt="我的 Last.fm" title="我的 Last.fm"></p><h1 id=现在>现在</h1><p>到现在为止, 还没有一个管理音乐的好办法, 音乐库已经积接近 200GB.</p><p>我心目中的音乐播放器应该是:</p><ul><li>有能力管理大量音乐</li><li>支持无损格式</li><li>可记录播放到 Last.fm</li><li>社交功能</li></ul><p>Groove Music 的出现让 Windows 平台出现了转机, 可以管理大量音乐不卡顿, 还支持无损格式, 单纯管理音乐的话太合适不过了. Mac 上还是没找到一个好办法.</p><table><thead><tr><th>播放器 需求</th><th align=center>管理音乐</th><th align=center>支持无损</th><th align=center>Last.fm</th><th align=center>社交</th></tr></thead><tbody><tr><td>iTunes ／  Music</td><td align=center>✅</td><td align=center>❌</td><td align=center>✅</td><td align=center>❌</td></tr><tr><td>网易云音乐</td><td align=center>❌</td><td align=center>✅</td><td align=center>❌</td><td align=center>✅</td></tr><tr><td>Groove Music</td><td align=center>✅</td><td align=center>✅</td><td align=center>❌</td><td align=center>❌</td></tr></tbody></table><p>也该改改强迫症了, 音乐 APP 都有那么强大的曲库, 为什还要自己搞本地音乐库. 但感觉记录到 Last.fm 上还是特别有必要的&mldr;心塞</p></div><div class=read-more><a href=/post/music-player/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/ubuntu-hostname/>Ubuntu 下更改 hostname</a></h1><div class=post-meta><span class=post-time>2016-08-25</span>
<span class=more-meta>322 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>有个同学在搞 Spark 要改主机名. 以前没关注过这个东西, 所以不知道怎么改.</p><p>今天用命令行的时候一直盯着主机名看, 感觉我也应该改一下, 尤其是连 VPS 时, 主机名难看的不行, 一般都是 localhost 或者一大串云服务商设定的一串.</p><p>这里更改 Ubuntu 14.04 为例.</p><p>输入命令 <code>man hostname</code> 里面有说</p><blockquote><p><strong>SET NAME</strong></p><p>When called with one argument or with the &ndash;file option, the commands set the host name or the NIS/YP domain name. hostname uses the sethostname(2) function, while all of the three domainname, ypdomain‐ name and nisdomainname use setdomainname(2). Note, that this is effec‐ tive only until the next reboot. <strong>Edit /etc/hostname for permanent change.</strong></p><p>Note, that only the super-user can change the names.</p></blockquote><p><strong>桌面系统更改 hostname</strong></p><p>Parallels 虚拟机快速安装的 Ubuntu 主机名是 ubuntu, 将 <code>/etc/hostname</code> 内容更改为 <code>virtual-ubuntu</code>, 重启更改生效.</p><p><strong>VPS 更改 hostname</strong></p><p>BandwagonHost 上面有一个 VPS 怎么改都不生效, 重启后 hostname 还会恢复成 localhost, 可能是服务提供商每次开机都会重置 /etc/hostname 文件, 那上面的办法就行不通了.</p><p>在 <code>/etc/rc.local</code> 中添加一行 <code>hostname myHostname</code> 即可.</p><p>连接 SSH 看起来更炫酷了是么.</p><p>![rename hostname](/img/post/2016-08-25-ubuntu-hostname/2016-08-25 15.09.31.png &ldquo;rename hostname&rdquo;)</p></div><div class=read-more><a href=/post/ubuntu-hostname/ class=read-more-link>Read more...</a></div></div></article></section><nav class=pagination><a class=prev href=/page/2/><i class="iconfont icon-left"></i><span class=prev-text>Prev</span></a>
<a class=next href=/page/4/><span class=next-text>Next</span>
<i class="iconfont icon-right"></i></a></nav></div></div></main><footer id=footer class=footer><div class=social-links><a href=http://mindy.tk/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2017 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Minzhang Cong</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script type=text/javascript src=/dist/even.26188efa.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-46567212-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>
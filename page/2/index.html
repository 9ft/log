<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>log</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Minzhang Cong"><meta name=description content="just a blog"><meta name=keywords content="Tech,Code,Life"><meta name=generator content="Hugo 0.66.0 with theme even"><link rel=canonical href=http://mindy.tk/><link href=http://mindy.tk/index.xml rel=alternate type=application/rss+xml title=log><link href=http://mindy.tk/index.xml rel=feed type=application/rss+xml title=log><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><meta property="og:title" content="log"><meta property="og:description" content="just a blog"><meta property="og:type" content="website"><meta property="og:url" content="http://mindy.tk/"><meta property="og:updated_time" content="2020-03-05T08:00:00+08:00"><meta itemprop=name content="log"><meta itemprop=description content="just a blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="log"><meta name=twitter:description content="just a blog"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>log</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>log</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><section id=posts class=posts><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/mech-keyboard/>机械键盘</a></h1><div class=post-meta><span class=post-time>2017-03-21</span>
<span class=more-meta>745 words</span>
<span class=more-meta>2 mins read</span></div></header><div class=post-content><div class=post-summary><h2 id=filco-majestouch-minila-air>Filco Majestouch MINILA Air</h2><p><img src=/img/post/2017-03-21-mech-keyboard/IMG20150515143414.jpg alt title="Filco Majestouch MINILA Air"></p><p>第一架机械键盘。</p><p>优点:</p><ul><li><strong>蓝牙</strong>，推崇无线外设，无线一定是趋势。</li><li><strong>青轴</strong>，用来打字。</li><li><strong>便携</strong>，标准 104 键跟 67 键比简直就是怪物。</li><li><strong>美观</strong>，奶酪绿的配色十分可人。</li></ul><p>有利必有弊，除了美观这点无可挑剔以外，其他优点也都是痛点。</p><p>缺点:</p><p>虽然这架键盘的蓝牙连接支持记忆三台设备，但从来就不好用过，每次更换设备都是重新配对，这点跟自己在用的蓝牙运动耳机一样，多设备切换总是不如有线方便。</p><p>一个人用青轴真的太爽了，噼里啪啦的打字特别带劲，但青轴十分不适合在宿舍或办公室使用，声音太轻脆，就青轴的轴体来说也只适合打字，打游戏别想了，老老实实换上薄膜键盘吧。</p><p>上上网，敲敲代码的话 67 键很好用，你会发现 F 键使用率实际很低。新 MacBook 把 F 键去掉也是有道理的，然而打游戏的时候&mldr;还是 87 键好一点吧。</p><p><strong>总的来说还是非常喜欢这架键盘的！</strong></p><h2 id=vidikon-威迪光-gtw-87>ViDikon 威迪光 GTW 87</h2><p>这架键盘是在张大妈上看到的，因为价格便宜果断入手，查了下现在已经买不到了。<a href=http://www.smzdm.com/p/6213926/>什么值得买: <em>ViDikon 威迪光 GTW 87 机械键盘</em></a></p><p>买的时候没抱太大希望，打算当个备用键盘而已，结果这架键盘超出预期，使用率相当高，甚至让我的 Filco MINILA Air 都差点打入冷宫。</p><ul><li><strong>黑轴</strong>，高特轴，看轴体上印的是 “Qutemu” ，<a href="https://www.google.com/search?q=Qutemu">Google 一下</a>啥也查不到，但他的中文名 “高特轴” 可以搜到不少东西，明显不如室友的 cherry 黑轴，手感偏硬，打字手容易酸。</li><li><strong>87 键</strong>，键盘布局跟 Filco 87 一毛一样，标准键位是个好东西。</li><li><strong>背光</strong>， 以前是反对背光的，光污染嘛，但是好像开着的时候比较多，不喜欢的时候可以关掉。</li><li><strong>媒体控制键</strong>，经常听音乐，这个用的很多，切歌调音量很方便。</li></ul><p>用化学品把键盘的商标洗掉了，现在可以叫他无印键盘了。现在超喜欢这架键盘，买了 ¥9.6 包邮键帽搭配一下。</p><p><img src=/img/post/2017-03-21-mech-keyboard/IMG_6257.jpg alt title="GTW 87 Pink"></p><p>后来搭配的绿色键帽，做工很精细。</p><p><img src=/img/post/2017-03-21-mech-keyboard/IMG_2467.jpg alt title="GTW 87 Green"></p><h2 id=想要这样一架键盘>想要这样一架键盘</h2><ul><li>87 键</li><li>白色外观</li><li>黑轴</li><li>蓝牙有线双模</li><li>媒体控制键</li></ul><p>满足上面条件的键盘市面上竟然没有。</p></div><div class=read-more><a href=/post/mech-keyboard/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/office-install/>自定义安装 Office 2016</a></h1><div class=post-meta><span class=post-time>2016-12-04</span>
<span class=more-meta>160 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>安装 Office 2016 的时候没有了自定义安装的选项, 默认安装全家桶.</p><p><img src=/img/post/2016-12-04-office-install/office_before.jpg alt title=Before></p><p><strong>解决方法</strong></p><p>下载 <a href="https://www.microsoft.com/en-us/download/details.aspx?id=49117"><code>Office 2016 Deployment Tool</code></a></p><p>运行后会生成 <code>setup.exe</code> 和 <code>configuration.xml</code>.</p><p>编辑 <code>configuration.xml</code>, 配置 <code>安装文件路径</code>，<code>版本</code>，<code>语言</code>，<code>要排除的组件</code>, 下面是我的配置文件.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=c>&lt;!-- Install Word, Excel, PowerPoint --&gt;</span>
<span class=nt>&lt;Configuration&gt;</span>
  <span class=nt>&lt;Add</span> <span class=na>SourcePath=</span><span class=s>&#34;E:\&#34;</span> <span class=na>OfficeClientEdition=</span><span class=s>&#34;64&#34;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;Product</span> <span class=na>ID=</span><span class=s>&#34;ProPlusRetail&#34;</span><span class=nt>&gt;</span>
      <span class=nt>&lt;Language</span> <span class=na>ID=</span><span class=s>&#34;zh-CN&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;Access&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;Groove&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;InfoPath&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;Lync&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;OneNote&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;Outlook&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;Publisher&#34;</span> <span class=nt>/&gt;</span>
      <span class=nt>&lt;ExcludeApp</span> <span class=na>ID=</span><span class=s>&#34;SharePointDesigner&#34;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/Product&gt;</span>
  <span class=nt>&lt;/Add&gt;</span>
<span class=nt>&lt;/Configuration&gt;</span>
</code></pre></td></tr></table></div></div><p>管理员方式运行命令提示符, 运行 <code>setup.exe /configure configuration.xml</code>.</p><p><img src=/img/post/2016-12-04-office-install/office_after.png alt title=After></p><p>搞定!</p></div><div class=read-more><a href=/post/office-install/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/bingwallpaper/>设置 Bing 主页背景为系统桌面</a></h1><div class=post-meta><span class=post-time>2016-11-27</span>
<span class=more-meta>583 words</span>
<span class=more-meta>2 mins read</span></div></header><div class=post-content><div class=post-summary><p>Windows 平台下有微软现成的软件.
macOS 下也不能放过 Bing 精选的壁纸.</p><p>无意中看到一个<a href=http://www.cnblogs.com/feiqihang/p/5076573.html><code>使用 Shell 实现的代码</code></a>, 但实际上不能使用.</p><p>基于上面链接的方法, 复习一下 Shell 编程和正则表达式, 自己修改的代码如下:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Shell data-lang=Shell><span class=cp>#!/bin/sh
</span><span class=cp></span><span class=nv>localDir</span><span class=o>=</span><span class=s2>&#34;/Users/</span><span class=nv>$USER</span><span class=s2>/Pictures/BingWallpaper&#34;</span>
<span class=nv>filenameRegex</span><span class=o>=</span><span class=s2>&#34;.*&#34;</span><span class=k>$(</span>date <span class=s2>&#34;+%Y-%m-%d&#34;</span><span class=k>)</span><span class=s2>&#34;.*jpg&#34;</span>
<span class=nv>log</span><span class=o>=</span><span class=nv>$localDir</span>/log.log

<span class=c1># 判断本地是否存在今日壁纸</span>
<span class=nv>findResult</span><span class=o>=</span><span class=k>$(</span>find <span class=nv>$localDir</span> -regex <span class=nv>$filenameRegex</span><span class=k>)</span>
<span class=k>if</span> <span class=o>[</span> ! -n <span class=s2>&#34;</span><span class=nv>$findResult</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nv>baseUrl</span><span class=o>=</span><span class=s2>&#34;cn.bing.com&#34;</span>
    <span class=c1># 提取壁纸图片URL</span>
    <span class=nv>imgurl</span><span class=o>=</span><span class=k>$(</span>expr <span class=s2>&#34;</span><span class=k>$(</span>curl -L <span class=nv>$baseUrl</span> <span class=p>|</span> grep hprichbg<span class=k>)</span><span class=s2>&#34;</span> : <span class=s1>&#39;.*hprichbg\(.*\)&#34;,id.*&#39;</span><span class=k>)</span>
    <span class=c1># 提取图片名称</span>
    <span class=nv>filename</span><span class=o>=</span><span class=k>$(</span>expr <span class=s2>&#34;</span><span class=nv>$imgurl</span><span class=s2>&#34;</span> : <span class=s1>&#39;.*/\(.*\)&#39;</span><span class=k>)</span>
    <span class=c1># 本地图片地址</span>
    <span class=nv>localpath</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$localDir</span><span class=s2>/</span><span class=k>$(</span>date <span class=s2>&#34;+%Y-%m-%d&#34;</span><span class=k>)</span><span class=s2>-</span><span class=nv>$filename</span><span class=s2>&#34;</span>
    <span class=c1># 下载图片至本地</span>
    curl -o <span class=nv>$localpath</span> <span class=nv>$baseUrl</span>/az/hprichbg/<span class=nv>$imgurl</span>
    <span class=c1># 调用Finder应用切换桌面壁纸</span>
    osascript -e <span class=s2>&#34;tell application \&#34;Finder\&#34; to set desktop picture to POSIX file \&#34;</span><span class=nv>$localpath</span><span class=s2>\&#34;&#34;</span>
    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span>date +<span class=s2>&#34;%Y-%m-%d %H:%M:%S&#34;</span><span class=k>)</span><span class=s2> Downloaded </span><span class=nv>$filename</span><span class=s2>&#34;</span> &gt;&gt; log
<span class=k>else</span>
    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span>date +<span class=s2>&#34;%Y-%m-%d %H:%M:%S&#34;</span><span class=k>)</span><span class=s2> Exist&#34;</span> &gt;&gt; log
    <span class=nb>exit</span> <span class=m>0</span>
<span class=k>fi</span>
</code></pre></td></tr></table></div></div><h4 id=curl>Curl</h4><p>Using <strong>curl</strong> to transfer data.</p><p><strong><code>-L, —location</code></strong></p><blockquote><p>If  the server reports that the requested page has moved to a different location (indicated with a Location: header and  a  3XX  response code), this option will make curl redo the request on the new place</p></blockquote><p><strong><code>-o, --output &lt;file></code></strong></p><blockquote><p>Write output to instead of stdout.</p></blockquote><h4 id=regex>Regex</h4><p><strong><code>expr STRING : REGEXP</code></strong></p><blockquote><p>Anchored pattern match of regular expression <em>REGEXP</em> in <em>STRING</em>. [Source](Linux and Unix expr command)</p></blockquote><p>Regex can test on: <a href=https://regex101.com>regex101.com</a></p><p><strong><code>\(.*\)</code></strong></p><blockquote><p>The regular expression <strong>'\(.*\)'</strong> represents &ldquo;The actual text (whatever appears in <strong>between the parentheses</strong>, which are escaped with backslashes) which matches the pattern <strong>.*</strong>, which itself represents any number of any character.&rdquo; Matched against the text <strong>text</strong>, this returns the string exactly:</p></blockquote><p>Got <code>imgurl</code> = <code>BlackchurchRock_ZH-CN9991716795_1920x1080.jpg</code></p><h4 id=crontab>Crontab</h4><p>因为学校的网络环境比较复杂, 通常开机后并没有网络连接, 所以没办法设置为开机启动. 现在用的办法是用 Crontab 每小时运行一次脚本, 如果检查到今天的壁纸已经存在, 则放弃.</p><p><strong>crontab</strong> [<strong>-u</strong> <strong>user</strong>] <strong>file</strong></p><p><strong>crontab</strong> [<strong>-u</strong> <strong>user</strong>] { <strong>-l</strong> | <strong>-r</strong> | <strong>-e</strong> }</p><p><a href=http://unix.stackexchange.com/questions/81805/what-are-the-runtime-permissions-of-a-cron-job>Example of job definition:</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=c1># Example of job definition:</span>
.---------------- minute <span class=o>(</span><span class=m>0</span> - 59<span class=o>)</span>
<span class=p>|</span>  .------------- hour <span class=o>(</span><span class=m>0</span> - 23<span class=o>)</span>
<span class=p>|</span>  <span class=p>|</span>  .---------- day of month <span class=o>(</span><span class=m>1</span> - 31<span class=o>)</span>
<span class=p>|</span>  <span class=p>|</span>  <span class=p>|</span>  .------- month <span class=o>(</span><span class=m>1</span> - 12<span class=o>)</span> OR jan,feb,mar,apr ...
<span class=p>|</span>  <span class=p>|</span>  <span class=p>|</span>  <span class=p>|</span>  .---- day of week <span class=o>(</span><span class=m>0</span> - 6<span class=o>)</span> <span class=o>(</span><span class=nv>Sunday</span><span class=o>=</span><span class=m>0</span> or 7<span class=o>)</span> OR sun,mon,tue,wed,thu,fri,sat
<span class=p>|</span>  <span class=p>|</span>  <span class=p>|</span>  <span class=p>|</span>  <span class=p>|</span>
*  *  *  *  * user-name  <span class=nb>command</span> to be executed
</code></pre></td></tr></table></div></div><p><strong>Shell</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=c1># -n 判断一个变量是否有值</span>
<span class=k>if</span> <span class=o>[</span> ! -n <span class=s2>&#34;</span><span class=nv>$var</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
  <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$var</span><span class=s2> is empty&#34;</span>
  <span class=nb>exit</span> <span class=m>0</span>
<span class=k>else</span>
  <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$var</span><span class=s2> is not empty&#34;</span>
  <span class=nb>exit</span> <span class=m>0</span>
<span class=k>fi</span>
</code></pre></td></tr></table></div></div></div><div class=read-more><a href=/post/bingwallpaper/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/macos-ntfs/>macOS 原生读写挂载 NTFS 文件系统</a></h1><div class=post-meta><span class=post-time>2016-11-23</span>
<span class=more-meta>220 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>Paragon NTFS for Mac® 虽然很好用, 最近重装系统尝试了一下<a href=https://www.zhihu.com/question/19571334/answer/89658747>知乎答案</a>的方法, 目前已经稳定使用一个月, 此文记录一下挂载过程.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>$ sudo -s	<span class=c1># 切换 root 用户</span>
$ <span class=nb>cd</span> /sbin	<span class=c1># 进入 /sbin 文件夹</span>
$ mv mount_ntfs mount_ntfs_orig	<span class=c1># 重命名</span>
$ vi mount_ntfs	<span class=c1># 新建 mount_ntfs 文件</span>
</code></pre></td></tr></table></div></div><p>在 <code>mount_ntfs</code> 中写入:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=cp>#!/bin/sh
</span><span class=cp></span>/sbin/mount_ntfs_orig -o rw,nobrowse <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>$ chmod a+x mount_ntfs	<span class=c1># 增加可执行权限</span>
$ <span class=nb>exit</span>	<span class=c1># 退出 root 身份</span>
</code></pre></td></tr></table></div></div><p>重启验证</p><p><strong>此方法使用三个月后</strong></p><p>NTFS 分区时不时会出错, 具体情况是看不到文件, 不知道 macOS 下有什么软件可以修复 NTFS 的错误, 所以每次都要去 Win 下修复. 看来苹果自己的 NTFS 确实有问题. 忍无可忍入正 Paragon NTFS for Mac !</p></div><div class=read-more><a href=/post/macos-ntfs/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/macosx86/>神州 K640E-i7 黑苹果安装</a></h1><div class=post-meta><span class=post-time>2016-09-27</span>
<span class=more-meta>1332 words</span>
<span class=more-meta>3 mins read</span></div></header><div class=post-content><div class=post-summary><blockquote><p>2019-12-09 替换为 WhateverGreen 驱动核显
2019-10-20 update to catalina</p></blockquote><h1 id=前期工作>前期工作</h1><p>必知必会.</p><h2 id=windows-下挂载-mac-的-efi-分区>Windows 下挂载 Mac 的 EFI 分区</h2><p><strong>管理员权限下执行</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>C:<span class=se>\W</span>indows<span class=se>\s</span>ystem32&gt;diskpart            // 进入 diskpart
DISKPART&gt; list disk                     // 列出磁盘

  Disk <span class=c1>###  Status         Size     Free     Dyn  Gpt</span>
  --------  -------------  -------  -------  ---  ---
  Disk <span class=m>0</span>    Online          <span class=m>931</span> GB      <span class=m>0</span> B
  Disk <span class=m>1</span>    Online          <span class=m>119</span> GB      <span class=m>0</span> B        *
  Disk <span class=m>2</span>    Online          <span class=m>111</span> GB      <span class=m>0</span> B        *

DISKPART&gt; <span class=k>select</span> disk <span class=m>1</span>                 // 选择磁盘

Disk <span class=m>1</span> is now the selected disk.

DISKPART&gt; list partition                // 列出所选磁盘分区

  Partition <span class=c1>###  Type              Size     Offset</span>
  -------------  ----------------  -------  -------
  Partition <span class=m>1</span>    System             <span class=m>200</span> MB    <span class=m>20</span> KB
  Partition <span class=m>2</span>    Primary            <span class=m>118</span> GB   <span class=m>200</span> MB
  Partition <span class=m>3</span>    Unknown            <span class=m>619</span> MB   <span class=m>118</span> GB

DISKPART&gt; <span class=k>select</span> partition <span class=m>1</span>            // 选择分区

Partition <span class=m>1</span> is now the selected partition.

DISKPART&gt; assign                        // 分配盘符, 盘符为系统预设

DiskPart successfully assigned the drive letter or mount point.
</code></pre></td></tr></table></div></div><p>盘符挂载好，通过自带的资源管理器</p><h2 id=mac-下挂载-efi-分区>Mac 下挂载 EFI 分区</h2><h3 id=方法1命令行方式>方法1，命令行方式</h3><p><strong>1. Discover the volume identifier for your EFI boot partition.</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>diskutil list
</code></pre></td></tr></table></div></div><p>The output should look something like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>/dev/disk0 <span class=o>(</span>internal, physical<span class=o>)</span>:
   <span class=c1>#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:     FDisk_partition_scheme                        *1.0 TB     disk0
   1:               Windows_NTFS Data                    1.0 TB     disk0s1
/dev/disk1 <span class=o>(</span>internal, physical<span class=o>)</span>:
   <span class=c1>#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:      GUID_partition_scheme                        *128.0 GB   disk1
   1:                        EFI EFI                     209.7 MB   disk1s1
   2:                  Apple_HFS macOS                   127.2 GB   disk1s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk1s3
/dev/disk2 <span class=o>(</span>internal, physical<span class=o>)</span>:
   <span class=c1>#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   0:      GUID_partition_scheme                        *120.0 GB   disk2
   1:           Windows Recovery                         471.9 MB   disk2s1
   2:                        EFI NO NAME                 104.9 MB   disk2s2
   3:         Microsoft Reserved                         16.8 MB    disk2s3
   4:       Microsoft Basic Data Windows                 119.4 GB   disk2s4
</code></pre></td></tr></table></div></div><p>In this case, the volume identifier of the EFI partition is <code>disk1s1</code>.</p><p><strong>2. Create a mount point.</strong></p><p>A mount point is a directory where a non-booted volume is mounted.  On Mac OS X, mount points are typically created in /Volumes.  We can create a directory called efi within /Volumes by running the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>mkdir /Volumes/efi
</code></pre></td></tr></table></div></div><p><strong>3. Mount the EFI partition at the efi mount point.</strong></p><p>Run the command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo mount -t msdos /dev/disk1s1 /Volumes/efi
</code></pre></td></tr></table></div></div><p>That’s it.  Your EFI volume will be mounted.  Modify it at your own risk.</p><h3 id=方法2gui方式>方法2，GUI方式</h3><p>Clover Configurator -> 工具 -> 挂载分区</p><h1 id=制作系统盘>制作系统盘</h1><p>下载 Mojave 及后续版本时不像以前一样直接在 Mac App Store 下载，这时候需要使用 <a href=http://dosdude1.com/catalina/><code>macOS Catalina Patcher</code></a> 来获得完整镜像，下载完成后使用 <a href=https://www.tonymacx86.com/resources/unibeast-9-1-0-mojave.418/><code>UniBeast</code></a> 创建 USB 启动盘，注意启动盘格式应为 GUID。</p><p>具体格式可以通过 <code>diskutil list</code> 确认，格式化为 GUID 分区 <code>diskutil eraseDisk HFS+ usb GPT /dev/disk3</code></p><p><img src=/img/post/2016-09-27-macosx86/2019-04-05.21.36.20.png alt></p><h1 id=安装系统>安装系统</h1><p>使用刚刚的可启动 U 盘 正常安装。</p><h1 id=安装驱动>安装驱动</h1><p>第一次开机时的状态:</p><ul><li>无线网卡已经驱动好了 (目前版本 BCM94360HMB 2.4G、5G 免驱).</li><li>笔记本键盘和触摸板不能用, 因为没合适的 PS2 键盘驱动, 找一个 USB 外接键盘以继续.</li></ul><h2 id=安装-fakesmc-和-clover>安装 FakeSMC 和 Clover</h2><p>第一次开机运行 MultiBeast, 它可以安装 Clover 引导和一些驱动.</p><p><img src=/img/post/2016-09-27-macosx86/2016-09-02.1.30.31.png alt=MultiBeast title=MultiBeast></p><p>安装 MultiBeast 提供的:</p><ul><li><p>FakeSMC</p></li><li><p>Clover UEFI</p></li></ul><p>安装重启, 现在可以把系统的默认启动项改为 Clover, 可以引导 Windows 和 macOS, 推荐两个系统共用一个 EFI 分区, 系统 U 盘可以暂时扔掉.</p><blockquote><p>目前更流行使用 VirtualSMC 来代替FakeSMC，但我自己试过多次 VirtualSMC 和 Lilu 不能共存。。原因不明</p></blockquote><h2 id=键盘和触摸板>键盘和触摸板</h2><p>键盘还不能使用, 为了方便折腾, 先驱动键盘和触摸板.</p><p>这里使用的是 <a href=http://forum.osxlatitude.com/>OSXLatitude Forum</a> 大神 Crew 的 <a href=http://forum.osxlatitude.com/index.php?/topic/1948-elan-focaltech-and-synaptics-smart-touchpad-driver-mac-os-x/>ELAN, FocalTech and Synaptics (Smart Touchpad) Driver (Mac OS X)</a>.</p><p><em>Alt 键会被当成 Command 键, 外接键盘上则没这个问题.</em></p><p>下载 <code>SmartTouchPad_v4.6.5.zip</code>, 打开 <code>Contents／PlugIns／ApplePS2Keyboard.kext/Contents/Info.plist</code>, 将 <code>Swap alt and windows key</code> 置 为 <code>false</code></p><h2 id=显卡>显卡</h2><p>Intel HD Graphics 4600</p><blockquote><p>参照 <a href=https://zuiyu1818.cn/posts/Hac_Intel_Graphics.html>WhateverGreen 驱动 Intel 核显</a></p></blockquote><h3 id=修复花屏boot-second-stage-glitch>修复花屏(boot second stage glitch)</h3><p>试了所有办法都不奏效，只能修改clover分辨率为<code>1024*768</code></p><h3 id=todo>TODO:</h3><ul><li><input disabled type=checkbox>亮度调节，<a href=https://github.com/acidanthera/WhateverGreen/blob/master/Manual/FAQ.IntelHD.cn.md#%E8%B0%83%E8%8A%82%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%BA%AE%E5%BA%A6>WhateverGreen 官方教程不生效</a></li></ul><h2 id=声卡>声卡</h2><p>这台笔记本声卡型号是 VIA VT1802P</p><p>10.15.2 开始已经可以使用 AppleALC 仿冒了，仅需要加载kext即可。升级10.15.2的惊喜，之前费了好大劲搞这个。</p><p><em>目前存在问题，开机默认耳机插口，需要手动切换到扬声器，麦克风测试是能用的，但杂音太大了基本不可用</em></p><h3 id=todo-1>TODO:</h3><ul><li><input disabled type=checkbox>AppleALC 仿冒</li><li><input disabled type=checkbox>开机自动调整音频到扬声器</li></ul><h2 id=电池>电池</h2><p>RehabMan 大神的 <a href=https://github.com/RehabMan/OS-X-ACPI-Battery-Driver>OS-X-ACPI-Battery-Driver</a></p><h2 id=bcm94360hmb>BCM94360HMB</h2><h3 id=屏蔽针脚>屏蔽针脚</h3><p><img src=/img/post/2016-09-27-macosx86/2019-11-01-BCM94360HMB.jpg alt=BCM94360HMB屏蔽针脚 title=BCM94360HMB屏蔽针脚></p><h3 id=蓝牙驱动>蓝牙驱动</h3><p>使用 <code>BrcmBluetoothInjector.kext</code></p><h3 id=显示蓝牙为第三方驱动的解决办法>显示蓝牙为第三方驱动的解决办法</h3><p><code>FakePCIID_BCM94352Z_as_BCM94360CS2.kext</code></p><h1 id=clover>Clover</h1><h2 id=clover-启动菜单>Clover 启动菜单</h2><p>删除 Clover 中无用的启动项.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;key&gt;</span>Scan<span class=nt>&lt;/key&gt;</span>
<span class=nt>&lt;dict&gt;</span>
    <span class=nt>&lt;key&gt;</span>Entries<span class=nt>&lt;/key&gt;</span>
    <span class=nt>&lt;true/&gt;</span>
    <span class=nt>&lt;key&gt;</span>Legacy<span class=nt>&lt;/key&gt;</span>
    <span class=nt>&lt;false/&gt;</span>
    <span class=nt>&lt;key&gt;</span>Tool<span class=nt>&lt;/key&gt;</span>
    <span class=nt>&lt;true/&gt;</span>
<span class=nt>&lt;/dict&gt;</span>
</code></pre></td></tr></table></div></div><h1 id=与-windows-共存>与 Windows 共存</h1><h2 id=数据盘格式>数据盘格式</h2><p>因macOS使用iCloud相册必须使用HFS或AFS，只能放弃NTFS，Windows下使用 <a href=https://www.paragon-software.com/us/home/hfs-windows/>HFS+ for Windows by Paragon Software</a> 访问数据。Win下使用目前没遇到什么问题。</p></div><div class=read-more><a href=/post/macosx86/ class=read-more-link>Read more...</a></div></div></article></section><nav class=pagination><a class=prev href=/><i class="iconfont icon-left"></i><span class=prev-text>Prev</span></a>
<a class=next href=/page/3/><span class=next-text>Next</span>
<i class="iconfont icon-right"></i></a></nav></div></div></main><footer id=footer class=footer><div class=social-links><a href=http://mindy.tk/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2017 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Minzhang Cong</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script type=text/javascript src=/dist/even.26188efa.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-46567212-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>
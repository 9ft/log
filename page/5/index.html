<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>log</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Minzhang Cong"><meta name=description content="just a blog"><meta name=keywords content="Tech,Code,Life"><meta name=generator content="Hugo 0.66.0 with theme even"><link rel=canonical href=http://mindy.tk/><link href=http://mindy.tk/index.xml rel=alternate type=application/rss+xml title=log><link href=http://mindy.tk/index.xml rel=feed type=application/rss+xml title=log><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><meta property="og:title" content="log"><meta property="og:description" content="just a blog"><meta property="og:type" content="website"><meta property="og:url" content="http://mindy.tk/"><meta property="og:updated_time" content="2020-03-05T08:00:00+08:00"><meta itemprop=name content="log"><meta itemprop=description content="just a blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="log"><meta name=twitter:description content="just a blog"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>log</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>log</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><section id=posts class=posts><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/vs-remote-debug-err/>VS 错误-本地调试时出现远程调试器错误</a></h1><div class=post-meta><span class=post-time>2016-05-30</span>
<span class=more-meta>405 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>最近在用 <code>VS2013</code> 跑程序, 经常出现一个错误. 而且看起来是个无厘头的错误.</p><p><img src=/img/post/2016-05-30-vs-remote-debug-err/vs-error-remote-local-1.jpg alt=Error title=Error></p><p>错误内容:<br><code>无法启动程序 远程调试器拒绝了连接请求. 请确保远程调试器在"Windows 身份验证"模式下运行.</code></p><p>用中文查了一下资料未果.</p><p>冷的一看, 我没有远程调试程序啊, 我的程序是本地调试运行的. 调试应该走的网络协议. 不过我把 Win 自带的杀软和防火墙关掉还是未果.</p><p>用英文才查到 MSDN 的一篇文档 <a href=https://msdn.microsoft.com/en-us/library/0773txhx.aspx><code>Unable to Connect to the Microsoft Visual Studio Remote Debugging Monitor</code></a></p><blockquote><p><strong>I got this message while I was debugging locally</strong></p></blockquote><blockquote><p>If you are getting this message while you are debugging locally, your anti-virus software or a third-party firewall may be to blame. Visual Studio is a 32-bit application, so it uses the 64-bit version of the remote debugger to debug 64-bit applications. The two processes communicate using the local network within the local computer. No network traffic leaves the computer, but it is possible that third party security software may block the communication.</p></blockquote><p>跟自己预想的差不多, 实际上调试走的是网络, 罪魁祸首是 <em>杀毒软件</em> 或者 <em>防火墙</em> 的问题. <strong>管理员运行 <code>devenv.exe</code> 成功解决</strong>.</p><p>附 <code>VS</code> 本地调试需要的网络条件: <a href=https://msdn.microsoft.com/en-us/library/2y0675c1.aspx><code>Error: Firewall on Local Machine</code></a></p><h1 id=后记>后记</h1><p>对比一下 MSDN 的中英文档就会发现, 中文的说明太少了, 然而中文资料基本没有, 所以光查中文没法解决这个问题.</p><p>英文页面: <a href=https://msdn.microsoft.com/en-us/library/0773txhx.aspx>https://msdn.microsoft.com/en-us/library/0773txhx.aspx</a><br>中文页面: <a href=https://msdn.microsoft.com/zh-cn/library/0773txhx.aspx>https://msdn.microsoft.com/zh-cn/library/0773txhx.aspx</a></p></div><div class=read-more><a href=/post/vs-remote-debug-err/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/hexo/>hexo</a></h1><div class=post-meta><span class=post-time>2016-05-06</span>
<span class=more-meta>16 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>HEXO有好看的主题, 换HEXO</p></div><div class=read-more><a href=/post/hexo/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/ubuntu-lnmp/>Ubuntu 下安装 LNMP</a></h1><div class=post-meta><span class=post-time>2016-05-05</span>
<span class=more-meta>403 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><h1 id=安装-lamp>安装 <code>LAMP</code></h1><p>咦？我们要安装 <code>LNMP</code>, 为什么要安装 <code>LAMP</code> 呢, 因为 <code>Ubuntu</code> 安装 <code>LAMP</code> 超级方便. 要其中的 <code>MP (MySQL, PHP)</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo apt-get install lamp-server^
</code></pre></td></tr></table></div></div><p><code>php5-fpm</code> 和 <code>php5-mcrypt</code> 必须安装. 没安装上的话要手动安装. 其中:</p><ul><li><code>php5-fpm</code> 是 <code>FastCGI Process Manager</code>, 是 <code>Nginx</code> 配合 <code>PHP</code> 所必须使用的.</li><li><code>php5-mcrypt</code> 是 <code>phpMyAdmin</code> 需要使用到的.</li></ul><h1 id=安装配置-nginx>安装配置 <code>Nginx</code></h1><h2 id=安装>安装</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo apt-get install nginx
</code></pre></td></tr></table></div></div><h2 id=配置>配置</h2><h3 id=部署-html>部署 <code>HTML</code></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>server {
  listen 80;
  listen [::]:80;
  root /usr/share/nginx/example.com;
  index index.html index.htm;
  server_name example.com;

  location / {
    try_files $uri $uri/ =404;
  }
}
</code></pre></td></tr></table></div></div><h3 id=部署-php>部署 <code>PHP</code></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>server {
  listen 80;
  listen [::]:80;
  server_name example.com;
  root /usr/share/nginx/example.com;
  index index.html index.htm index.php;

  location / {
    try_files $uri $uri/ =404;
  }

  location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
  }

  location ~ /\.ht {
    deny all;
  }
}
</code></pre></td></tr></table></div></div><p><code>PHP</code> 可以通过写个探针测试配置是否正确</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-php data-lang=php><span class=cp>&lt;?php</span> <span class=nx>phpinfo</span><span class=p>();</span> <span class=cp>?&gt;</span>
</code></pre></td></tr></table></div></div><h1 id=安装配置-phpmyadmin>安装配置 <code>phpMyAdmin</code></h1><h2 id=安装-1>安装</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo apt-get install phpmyadmin
</code></pre></td></tr></table></div></div><h2 id=配置-1>配置</h2><p>仿照上一节 <code>部署 PHP</code> 中为 <code>phpmyadmin</code> 设置访问入口.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>server {
  listen 80;
  listen [::]:80;
  server_name phpmyadmin.example.com;
  root /usr/share/phpmyadmin;
  index index.php;

  location / {
    try_files $uri $uri/ =404;
  }

  location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
  }
  location ~ /\.ht {
    deny all;
  }
}
</code></pre></td></tr></table></div></div><h2 id=问题-缺少-mcrypt-扩展-请检查-php-配置>问题: 缺少 <code>mcrypt</code> 扩展, 请检查 <code>PHP</code> 配置</h2><p>如果出现 <code>缺少 mcrypt 扩展. 请检查 PHP 配置.</code> 的提示.</p><p>执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo apt-get install php5-mcrypt
</code></pre></td></tr></table></div></div><p>配置 <code>php.ini</code>, 加上 <code>extension=php_mcrypt.so</code>, 修改结果:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions ;
;;;;;;;;;;;;;;;;;;;;;;
;
; If you wish to have an extension loaded automatically, use the following

extension=php_mcrypt.so
</code></pre></td></tr></table></div></div><h1 id=enjoy>Enjoy!</h1></div><div class=read-more><a href=/post/ubuntu-lnmp/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/jekyll-nginx/>VPS 上利用 Jekyll Nginx 搭建博客</a></h1><div class=post-meta><span class=post-time>2016-05-04</span>
<span class=more-meta>739 words</span>
<span class=more-meta>2 mins read</span></div></header><div class=post-content><div class=post-summary><p>以前买的虚拟空间虽然很稳定, 但自己能控制的东西不多. 折腾VPS, 把个人博客迁移过去. 换个胃口, 先不折腾 <code>LEMP</code> 了, 装个 <code>Jekyll</code> 好啦.</p><h1 id=安装-ruby>安装 <code>Ruby</code></h1><p>Mac 下也推荐使用 RVM, 虽然 macOS 自带了 Ruby, 但这个 Ruby 是为系统所使用的, 安装 gem 需要使用 sudo. 否则没有对目录 /Library/Ruby/Gems/ 的写权限.</p><p>使用 <code>RVM</code> 安装, 参照 <a href=https://rvm.io/rvm/install>Installing RVM</a></p><blockquote><p>Before any other step install mpapis public key (might need gpg2) (see security)</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
</code></pre></td></tr></table></div></div><blockquote><p>Install RVM (development version):</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=se>\c</span>url -sSL https://get.rvm.io <span class=p>|</span> bash
</code></pre></td></tr></table></div></div><blockquote><p>Display a list of all known rubies.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>rvm list known
</code></pre></td></tr></table></div></div><blockquote><p>Install a version of Ruby (eg 2.2)</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>rvm install 2.2
</code></pre></td></tr></table></div></div><blockquote><p>Check this worked correctly</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>ruby -v
</code></pre></td></tr></table></div></div><h1 id=安装-jekyll>安装 <code>Jekyll</code></h1><p>参照 <a href=https://jekyllrb.com/>Jekyll Quick-start Instructions</a>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>gem install jekyll
jekyll new my-awesome-site
<span class=nb>cd</span> my-awesome-site
</code></pre></td></tr></table></div></div><h1 id=启动服务器>启动服务器</h1><p>使用浏览器在本地进行预览.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>jekyll serve
</code></pre></td></tr></table></div></div><h1 id=部署-jekyll-生成的网站>部署 <code>Jekyll</code> 生成的网站</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>jekyll build --source ~/my-awesome-site --destination /var/www/awesomeblog
</code></pre></td></tr></table></div></div><h1 id=配置-nginx>配置 <code>Nginx</code></h1><p>复制默认配置文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/example.com
</code></pre></td></tr></table></div></div><p>参照 <a href=https://www.digitalocean.com/community/tutorials/how-to-get-started-with-jekyll-on-an-ubuntu-vps>How To Get Started with Jekyll on an Ubuntu VPS</a> 在 <code>example.com</code> 中写一个最简单的配置文件:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>server {
  listen 80;
  # the domain of your VPS
  server_name example.com;
  root /home/deployer/blog/current;
  index index.html
  expires 1d;
}
</code></pre></td></tr></table></div></div><p>Using symlinks means it&rsquo;s easy to take a site offline by removing the symlink without touching the original configuration file.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/example.com
</code></pre></td></tr></table></div></div><p>Tests the nginx configuration.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo nginx -t
</code></pre></td></tr></table></div></div><p>Restart nginx.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo service nginx restart
</code></pre></td></tr></table></div></div><h1 id=架设-http-协议的-git-服务器>架设 <code>HTTP</code> 协议的 <code>Git</code> 服务器</h1><h2 id=安装>安装</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>sudo apt-get install git gitweb fcgiwrap
</code></pre></td></tr></table></div></div><h2 id=配置>配置</h2><h3 id=配置-nginx-可运行-fastcgi>配置 <code>Nginx</code> 可运行 <code>fastcgi</code></h3><p>参照 <a href=http://beginor.github.io/2016/03/12/http-git-server-on-nginx.html>在 Ubuntu 系统上配置 Nginx Git 服务器</a> 和 <a href=http://weininger.net/configuration-of-nginx-for-gitweb-and-git-http-backend.html>NGINX Configuration for Gitweb and git-http-backend</a> 中的配置.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback># HTTP server
server {
  listen 80;
  listen [::]:80;
  server_name git.mindy.tk;
  root /usr/share/gitweb;
  access_log /var/log/nginx/git.mindy.tk.access.log;
  error_log /var/log/nginx/git.mindy.tk.error.log;

  #ssl                  on;
  #ssl_certificate      /etc/ssl/certs/certforyoursite.crt;
  #ssl_certificate_key  /etc/ssl/private/sitekey.pem;
  #ssl_session_timeout 5m;
  #ssl_protocols        TLSv1 TLSv1.1 TLSv1.2;
  #ssl_ciphers          HIGH:!ADH:!MD5;
  #ssl_prefer_server_ciphers on;

  # static repo files for cloning over https
  location ~ ^.*\.git/objects/([0-9a-f]+/[0-9a-f]+|pack/pack-[0-9a-f]+.(pack|idx))$ {
    auth_basic &#34;Restricted&#34;;
    auth_basic_user_file /etc/nginx/passwd;

    root /var/www/git.mindy.tk;
  }

  # requests that need to go to git-http-backend
  location ~ ^.*\.git/(HEAD|info/refs|objects/info/.*|git-(upload|receive)-pack)$ {
    auth_basic &#34;Restricted&#34;;
    auth_basic_user_file /etc/nginx/passwd;

    root /var/www/git.mindy.tk;

    fastcgi_pass unix:/var/run/fcgiwrap.socket;
    fastcgi_param SCRIPT_FILENAME   /usr/lib/git-core/git-http-backend;
    fastcgi_param PATH_INFO         $uri;
    fastcgi_param GIT_PROJECT_ROOT  /var/www/git.mindy.tk;
    fastcgi_param GIT_HTTP_EXPORT_ALL &#34;&#34;;
    fastcgi_param REMOTE_USER $remote_user;
    include fastcgi_params;
  }

  # send anything else to gitweb if it&#39;s not a real file
  try_files $uri @gitweb;
  location @gitweb {
    root /usr/share/gitweb;
    auth_basic &#34;Restricted&#34;;
    auth_basic_user_file /etc/nginx/passwd;

    fastcgi_pass unix:/var/run/fcgiwrap.socket;
    fastcgi_param SCRIPT_FILENAME   /usr/share/gitweb/gitweb.cgi;
    fastcgi_param PATH_INFO         $uri;
    fastcgi_param GITWEB_CONFIG     /etc/gitweb.conf;
    include fastcgi_params;
 }
}
</code></pre></td></tr></table></div></div><h3 id=配置-gitwebconf>配置 <code>gitweb.conf</code></h3><p>修改 <code>/etc/gitweb.conf</code> 为:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$projectroot = &#34;/usr/share/nginx/git.mindy.tk&#34;
</code></pre></td></tr></table></div></div><h3 id=使用-htpasswd-创建用户>使用 <code>htpasswd</code> 创建用户</h3><p>使用 <code>htpasswd</code> 创建用户名及其密码.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>htpasswd /etc/nginx/passwd user1
</code></pre></td></tr></table></div></div><h1 id=建立与本地仓库的连接>建立与本地仓库的连接</h1><h2 id=服务器上建立裸仓库>服务器上建立裸仓库</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>git init --bare test.git
</code></pre></td></tr></table></div></div><p>注意检查一下 <code>test.git</code> 的权限, 如果权限不足的话, 使用命令设置一下权限:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>chmod a+rw -R test.git
</code></pre></td></tr></table></div></div><h2 id=设置hook>设置<code>Hook</code></h2><p>参照 <a href=https://www.digitalocean.com/community/tutorials/how-to-deploy-jekyll-blogs-with-git>How To Deploy Jekyll Blogs with Git</a> <a href=http://jekyllrb.com/docs/deployment-methods/>Deployment methods</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=nb>cd</span> hooks
vi post-receive
</code></pre></td></tr></table></div></div><p>加入:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=cp>#!/bin/bash -l
</span><span class=cp></span><span class=nv>GIT_REPO</span><span class=o>=</span><span class=nv>$HOME</span>/repos/awesomeblog.git
<span class=nv>TMP_GIT_CLONE</span><span class=o>=</span><span class=nv>$HOME</span>/tmp/git/awesomeblog
<span class=nv>PUBLIC_WWW</span><span class=o>=</span>/var/www/awesomeblog

git clone <span class=nv>$GIT_REPO</span> <span class=nv>$TMP_GIT_CLONE</span>
jekyll build --source <span class=nv>$TMP_GIT_CLONE</span> --destination <span class=nv>$PUBLIC_WWW</span>
rm -Rf <span class=nv>$TMP_GIT_CLONE</span>
<span class=nb>exit</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>chmod +x post-receive
</code></pre></td></tr></table></div></div><h1 id=enjoy>Enjoy</h1></div><div class=read-more><a href=/post/jekyll-nginx/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/ubuntu-lamp/>Ubuntu 的 LAMP Tomcat FTP 安装和配置</a></h1><div class=post-meta><span class=post-time>2015-11-30</span>
<span class=more-meta>105 words</span>
<span class=more-meta>1 min read</span></div></header><div class=post-content><div class=post-summary><p>搭建好多遍, 都没有解决 Tomcat 间歇性挂掉的问题.</p><p>日志里是这样的:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>SEVERE: The web application <span class=o>[</span>/app<span class=o>]</span> registered the JDBC driver <span class=o>[</span>com.mysql.jdbc.Driver<span class=o>]</span> but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.

Dec 02, <span class=m>2015</span> 3:52:50 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads

SEVERE: The web application <span class=o>[</span>/app<span class=o>]</span> appears to have started a thread named <span class=o>[</span>MySQL Statement Cancellation Timer<span class=o>]</span> but has failed to stop it. This is very likely to create a memory leak.
</code></pre></td></tr></table></div></div></div><div class=read-more><a href=/post/ubuntu-lamp/ class=read-more-link>Read more...</a></div></div></article></section><nav class=pagination><a class=prev href=/page/4/><i class="iconfont icon-left"></i><span class=prev-text>Prev</span></a>
<a class=next href=/page/6/><span class=next-text>Next</span>
<i class="iconfont icon-right"></i></a></nav></div></div></main><footer id=footer class=footer><div class=social-links><a href=http://mindy.tk/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2017 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Minzhang Cong</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script type=text/javascript src=/dist/even.26188efa.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-46567212-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>